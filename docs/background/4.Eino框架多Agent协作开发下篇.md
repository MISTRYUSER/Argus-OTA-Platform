## å‰è¨€

è¿™ä»½æ–‡æ¡£æ˜¯Einoå¤šAgentå¼€å‘ç³»åˆ—çš„ç¬¬å››ç¯‡ï¼Œä¹Ÿæ˜¯å¤šAgentåä½œçš„æ”¶å°¾ç¯‡ã€‚ä¸Šç¯‡æˆ‘ä»¬æŒæ¡äº†åŸºç¡€åä½œæ¨¡å¼ï¼ˆçº¿æ€§ã€å¹¶è¡Œã€å¾ªç¯ç­‰ï¼‰ï¼Œä¸‹ç¯‡å°†èšç„¦ã€Œå¤æ‚åä½œæ¨¡å¼ä¸é«˜çº§ç‰¹æ€§ã€â€”â€”åŒ…æ‹¬ä¸­å¿ƒåŒ–åè°ƒçš„Supervisoræ¨¡å¼ã€ã€Œè§„åˆ’-æ‰§è¡Œ-åæ€ã€çš„Plan-Executeæ¨¡å¼ï¼Œä»¥åŠå¤šAgentçš„ä¸­æ–­ä¸æ¢å¤ã€æ¨¡å¼åµŒå¥—ç­‰å…³é”®èƒ½åŠ›ã€‚

  

ç»“åˆé¢è¯•æ¨¡æ‹Ÿé¡¹ç›®ä»£ç å’ŒEino ADKå®˜æ–¹æ–‡æ¡£ï¼Œæˆ‘ä»¬å°†ä»ã€Œå·¥å…·é“ºå«â†’å¤æ‚æ¨¡å¼å®æˆ˜â†’é¡¹ç›®æ·±åº¦å¯¹æ¥ã€é€æ­¥æ¨è¿›ï¼Œè®©ä½ ä¸ä»…èƒ½ç‹¬ç«‹å®ç°å¤æ‚å¤šAgentç³»ç»Ÿï¼Œè¿˜èƒ½çœ‹æ‡‚é¡¹ç›®ä¸­æ½œåœ¨çš„é«˜çº§åä½œé€»è¾‘ï¼ˆå¦‚é¢è¯•æµç¨‹çš„ä¸­å¿ƒåŒ–è°ƒåº¦ã€ç®€å†åˆ†æåçš„æ·±åº¦è°ƒç ”ï¼‰ã€‚

## 1. å…³é”®å·¥å…·ï¼šWithDeterministicTransferToï¼ˆç¡®å®šæ€§è½¬è®©ï¼‰

åœ¨å­¦å¤æ‚æ¨¡å¼å‰ï¼Œå¿…é¡»å…ˆæŒæ¡è¿™ä¸ªæ ¸å¿ƒå·¥å…·â€”â€”å®ƒæ˜¯Supervisoræ¨¡å¼çš„åŸºç¡€ï¼Œè§£å†³äº†ã€Œå­Agentæ‰§è¡Œå®Œåå¦‚ä½•è‡ªåŠ¨å›åˆ°çˆ¶Agentã€çš„é—®é¢˜ã€‚

  

### 1.1 æ¦‚å¿µé€šä¿—è®²

WithDeterministicTransferToï¼ˆç®€ç§°â€œç¡®å®šæ€§è½¬è®©â€ï¼‰æ˜¯ä¸€ä¸ªAgentå¢å¼ºå·¥å…·ï¼Œä½œç”¨æ˜¯ï¼š**ç»™Agenté¢„è®¾å›ºå®šçš„â€œä»»åŠ¡è½¬è®©è·¯å¾„â€ï¼Œå½“Agentæ­£å¸¸å®Œæˆä»»åŠ¡ï¼ˆæœªä¸­æ–­ï¼‰åï¼Œä¼šè‡ªåŠ¨ç”ŸæˆTransferäº‹ä»¶ï¼ŒæŠŠä»»åŠ¡è½¬ç»™é¢„è®¾çš„ç›®æ ‡Agent**ã€‚

  

ä¸¾ä¸ªä¾‹å­ï¼šé¢è¯•æµç¨‹ä¸­ï¼Œé—®é¢˜ç”ŸæˆAgentæ‰§è¡Œå®Œåï¼Œè‡ªåŠ¨æŠŠä»»åŠ¡è½¬å›é¢è¯•è°ƒåº¦Agentï¼ˆSupervisorï¼‰ï¼Œç”±è°ƒåº¦Agentå†³å®šä¸‹ä¸€æ­¥æ˜¯ç»§ç»­ç”Ÿæˆé—®é¢˜è¿˜æ˜¯ç»“æŸé¢è¯•â€”â€”è¿™å°±æ˜¯ç¡®å®šæ€§è½¬è®©çš„æ ¸å¿ƒç”¨é€”ã€‚

  

### 1.2 æ ¸å¿ƒå®ç°é€»è¾‘

#### ï¼ˆ1ï¼‰é…ç½®ç»“æ„

é€šè¿‡`DeterministicTransferConfig`å®šä¹‰è½¬è®©è§„åˆ™ï¼Œæ ¸å¿ƒå‚æ•°åªæœ‰2ä¸ªï¼š

```Go
// é…ç½®ç»“æ„ä½“
type DeterministicTransferConfig struct {
    Agent        Agent          // è¦å¢å¼ºçš„åŸå§‹Agent
    ToAgentNames []string       // ä»»åŠ¡å®Œæˆåè½¬è®©çš„ç›®æ ‡Agentåç§°åˆ—è¡¨ï¼ˆæŒ‰é¡ºåºè½¬è®©ï¼‰
}

// åŒ…è£…æ–¹æ³•ï¼šå¢å¼ºAgentçš„è½¬è®©èƒ½åŠ›
func AgentWithDeterministicTransferTo(_ context.Context, config *DeterministicTransferConfig) Agent
```

  

#### ï¼ˆ2ï¼‰æ ¸å¿ƒé€»è¾‘

1. åŒ…è£…åŸå§‹Agentï¼šå¯¹Agentè¿›è¡Œâ€œå¢å¼ºâ€ï¼Œè¦†ç›–å…¶`Run`æ–¹æ³•ï¼ˆæ”¯æŒResumableAgentçš„`Resume`æ–¹æ³•ï¼‰ã€‚
    
2. äº‹ä»¶è½¬å‘ï¼šåŸå§‹Agentçš„æ‰€æœ‰äº‹ä»¶ï¼ˆè¾“å‡ºã€å·¥å…·è°ƒç”¨ï¼‰ä¼šå®Œæ•´è½¬å‘ï¼Œä¸å½±å“åŸæœ‰é€»è¾‘ã€‚
    
3. è‡ªåŠ¨è½¬è®©ï¼šAgentæ­£å¸¸ç»“æŸï¼ˆæœªä¸­æ–­ï¼‰åï¼Œè‡ªåŠ¨ç”ŸæˆTransferäº‹ä»¶ï¼Œè½¬ç»™`ToAgentNames`ä¸­çš„ç›®æ ‡Agentã€‚
    
4. ä¸­æ–­ä¸è½¬è®©ï¼šå¦‚æœAgentæ‰§è¡Œè¿‡ç¨‹ä¸­è¢«ä¸­æ–­ï¼ˆå¦‚ç”¨æˆ·ä¸­é€”é€€å‡ºï¼‰ï¼Œä¸ä¼šè§¦å‘è½¬è®©ã€‚
    

### 1.3 å®Œæ•´ç¤ºä¾‹

ä»¥â€œé—®é¢˜ç”ŸæˆAgentâ†’è‡ªåŠ¨è½¬å›è°ƒåº¦Agentâ€ä¸ºä¾‹ï¼š

```Go
package main

import (
    "context"
    "log"
    "github.com/cloudwego/eino/adk"
    "github.com/cloudwego/eino/schema"
    "your-project-name/agent" // å¯¼å…¥ä½ é¡¹ç›®ä¸­çš„Agent
)

func main() {
    ctx := context.Background()

    // æ­¥éª¤1ï¼šåˆ›å»ºåŸå§‹Agentï¼ˆé—®é¢˜ç”ŸæˆAgentï¼‰
    questionAgent := agent.NewQuestionGeneratorAgent()

    // æ­¥éª¤2ï¼šç”¨WithDeterministicTransferToå¢å¼ºAgent
    // é…ç½®ï¼šé—®é¢˜ç”ŸæˆAgentå®Œæˆåï¼Œè‡ªåŠ¨è½¬è®©ç»™"InterviewSupervisor"ï¼ˆè°ƒåº¦Agentåç§°ï¼‰
    enhancedQuestionAgent := adk.AgentWithDeterministicTransferTo(ctx, &adk.DeterministicTransferConfig{
        Agent:        questionAgent,
        ToAgentNames: []string{"InterviewSupervisor"}, // ç›®æ ‡Agentåç§°ï¼ˆå¿…é¡»å’Œè°ƒåº¦Agentåç§°ä¸€è‡´ï¼‰
    })

    // æ­¥éª¤3ï¼šåˆ›å»ºè°ƒåº¦Agentï¼ˆSupervisorï¼Œåé¢ç« èŠ‚è¯¦ç»†è®²ï¼‰
    supervisorAgent := agent.NewInterviewSupervisorAgent()

    // æ­¥éª¤4ï¼šæ³¨å†Œå­Agentåˆ°è°ƒåº¦Agent
    combinedAgent, err := adk.SetSubAgents(ctx, supervisorAgent, []adk.Agent{enhancedQuestionAgent})
    if err != nil {
        log.Fatalf("æ³¨å†Œå­Agentå¤±è´¥ï¼š%v", err)
    }

    // æ­¥éª¤5ï¼šè¿è¡Œæµ‹è¯•
    runner := adk.NewRunner(ctx, adk.RunnerConfig{Agent: combinedAgent})
    iter := runner.Query(ctx, "åŸºäºè¿™ä»½ç®€å†ç”Ÿæˆé¢è¯•é—®é¢˜ï¼šæˆ‘ç†Ÿæ‚‰Goå¹¶å‘ç¼–ç¨‹")

    // å¤„ç†ç»“æœ
    for {
        event, ok := iter.Next()
        if !ok {
            break
        }
        if event.Err != nil {
            log.Fatal(event.Err)
        }
        // æ‰“å°è½¬è®©äº‹ä»¶
        if event.Action != nil && event.Action.TransferToAgent != nil {
            log.Printf("\nğŸ”„ Agent[%s] è‡ªåŠ¨è½¬è®©ç»™ï¼š%s", event.AgentName, event.Action.TransferToAgent.DestAgentName)
        }
        // æ‰“å°è¾“å‡ºç»“æœ
        if event.Output != nil && event.Output.MessageOutput != nil {
            log.Printf("\nğŸ“¢ Agent[%s] è¾“å‡ºï¼š%s", event.AgentName, event.Output.MessageOutput.Message.Content())
        }
    }
}
```

  

### 1.4 ä»£ç è§£æ

- æ­¥éª¤2ï¼š`enhancedQuestionAgent`æ˜¯å¢å¼ºåçš„Agentï¼Œæ‰§è¡Œå®Œåä¼šè‡ªåŠ¨è§¦å‘Transferã€‚
    
- æ­¥éª¤4ï¼š`SetSubAgents`æŠŠå¢å¼ºåçš„å­Agentæ³¨å†Œåˆ°è°ƒåº¦Agentï¼Œç¡®ä¿è°ƒåº¦Agentèƒ½æ‰¾åˆ°å®ƒã€‚
    
- è¿è¡Œç»“æœï¼šé—®é¢˜ç”ŸæˆAgentè¾“å‡ºåï¼Œä¼šæ‰“å°â€œè‡ªåŠ¨è½¬è®©ç»™InterviewSupervisorâ€ï¼Œä»»åŠ¡æ§åˆ¶æƒå›åˆ°è°ƒåº¦Agentã€‚
    

### 1.5 æ ¸å¿ƒä½œç”¨

- è§£å†³â€œå­Agentæ‰§è¡Œå®Œåå¦‚ä½•å›åˆ°çˆ¶Agentâ€çš„é—®é¢˜ï¼Œæ˜¯Supervisoræ¨¡å¼çš„æ ¸å¿ƒåŸºçŸ³ã€‚
    
- ç¡®ä¿åä½œæµç¨‹é—­ç¯ï¼Œé¿å…å­Agentæ‰§è¡Œå®Œåæµç¨‹ä¸­æ–­ã€‚
    
- æ”¯æŒå¤šä¸ªç›®æ ‡Agentï¼ˆæŒ‰`ToAgentNames`é¡ºåºè½¬è®©ï¼‰ã€‚
    

---

  

## 2. Supervisoræ¨¡å¼ï¼šä¸­å¿ƒåŒ–å¤šAgentè°ƒåº¦ï¼ˆåŠ¨æ€åˆ†é…ä»»åŠ¡ï¼‰

Supervisoræ¨¡å¼æ˜¯ã€Œä¸­å¿ƒåŒ–åè°ƒã€çš„å¤æ‚åä½œæ¨¡å¼ï¼Œé€‚åˆéœ€è¦åŠ¨æ€åˆ†é…ä»»åŠ¡ã€ç›‘æ§æ‰§è¡Œã€æ±‡æ€»ç»“æœçš„åœºæ™¯â€”â€”æ¯”å¦‚é¢è¯•æ¨¡æ‹Ÿé¡¹ç›®ä¸­ï¼Œç”¨ä¸€ä¸ªâ€œé¢è¯•è°ƒåº¦Agentâ€ï¼ˆSupervisorï¼‰åˆ†é…ç®€å†åˆ†æã€é—®é¢˜ç”Ÿæˆã€å›ç­”è¯„ä¼°ä»»åŠ¡ï¼Œå­Agentæ‰§è¡Œå®Œåè‡ªåŠ¨å›è°ƒï¼Œè°ƒåº¦Agentå†³å®šä¸‹ä¸€æ­¥ã€‚

  

### 2.1 æ¦‚å¿µé€šä¿—è®²

Supervisoræ¨¡å¼å°±åƒâ€œé¡¹ç›®ç»ç†â€ï¼ˆSupervisorï¼‰ç®¡ç†å¤šä¸ªâ€œä¸“ä¸šå‘˜å·¥â€ï¼ˆå­Agentï¼‰ï¼š

- é¡¹ç›®ç»ç†ï¼ˆSupervisorï¼‰ï¼šæ¥æ”¶æ€»ä»»åŠ¡ï¼ˆå¦‚â€œå®Œæˆä¸€æ¬¡å®Œæ•´é¢è¯•â€ï¼‰ï¼Œåˆ†é…ç»™å¯¹åº”å‘˜å·¥ï¼Œç›‘æ§è¿›åº¦ï¼Œæ±‡æ€»ç»“æœï¼Œå†³å®šä¸‹ä¸€æ­¥ï¼ˆç»§ç»­åˆ†é…ä»»åŠ¡æˆ–ç»“æŸï¼‰ã€‚
    
- ä¸“ä¸šå‘˜å·¥ï¼ˆå­Agentï¼‰ï¼šä¸“æ³¨åšå•ä¸€ä»»åŠ¡ï¼ˆå¦‚â€œç”ŸæˆæŠ€æœ¯é¢è¯•é¢˜â€ï¼‰ï¼Œåšå®Œåè‡ªåŠ¨å‘Šè¯‰é¡¹ç›®ç»ç†ï¼Œç­‰å¾…æ–°ä»»åŠ¡ã€‚
    
- æ ¸å¿ƒç‰¹ç‚¹ï¼šä¸­å¿ƒåŒ–æ§åˆ¶ã€ä»»åŠ¡é—­ç¯ã€åŠ¨æ€åˆ†é…ã€æ¾è€¦åˆæ‰©å±•ã€‚
    

### 2.2 æ ¸å¿ƒç»“æ„

```Plain
Supervisoræ¨¡å¼ = Supervisor Agent + å¤šä¸ªå¢å¼ºå­Agent
```

- Supervisor Agentï¼šåä½œæ ¸å¿ƒï¼Œè´Ÿè´£ä»»åŠ¡åˆ†é…ã€ç»“æœæ±‡æ€»ã€ä¸‹ä¸€æ­¥å†³ç­–ã€‚
    
- å¢å¼ºå­Agentï¼šæ¯ä¸ªå­Agentéƒ½é€šè¿‡`WithDeterministicTransferTo`å¢å¼ºï¼Œé¢„è®¾å›è°ƒåˆ°Supervisorã€‚
    

### 2.3 åä½œæµç¨‹

5. ä»»åŠ¡å¯åŠ¨ï¼šRunnerè§¦å‘Supervisorè¿è¡Œï¼Œè¾“å…¥æ€»ä»»åŠ¡ï¼ˆå¦‚â€œé¢è¯•Goåç«¯å€™é€‰äººâ€ï¼‰ã€‚
    
6. ä»»åŠ¡åˆ†é…ï¼šSupervisoræ ¹æ®ä»»åŠ¡éœ€æ±‚ï¼Œé€šè¿‡Transferäº‹ä»¶æŠŠä»»åŠ¡è½¬ç»™æŒ‡å®šå­Agentï¼ˆå¦‚â€œç®€å†åˆ†æAgentâ€ï¼‰ã€‚
    
7. å­Agentæ‰§è¡Œï¼šå­Agentæ‰§è¡Œå…·ä½“ä»»åŠ¡ï¼ˆå¦‚è§£æç®€å†ã€ç”Ÿæˆåˆ†æç»“æœï¼‰ã€‚
    
8. è‡ªåŠ¨å›è°ƒï¼šå­Agentå®Œæˆåï¼Œ`WithDeterministicTransferTo`è§¦å‘Transferï¼Œä»»åŠ¡è½¬å›Supervisorã€‚
    
9. ç»“æœå¤„ç†ï¼šSupervisoræ¥æ”¶å­Agentç»“æœï¼Œå†³å®šä¸‹ä¸€æ­¥ï¼ˆå¦‚è½¬ç»™â€œé—®é¢˜ç”ŸæˆAgentâ€æˆ–ç”Ÿæˆé¢è¯•æŠ¥å‘Šï¼‰ã€‚
    
10. å¾ªç¯/ç»ˆæ­¢ï¼šé‡å¤2-5æ­¥ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆï¼ˆå¦‚é¢è¯•ç»“æŸï¼‰æˆ–è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°ã€‚
    

### 2.4 å®Œæ•´ç¤ºä¾‹ï¼ˆé¢è¯•è°ƒåº¦ç³»ç»Ÿï¼‰

æˆ‘ä»¬å®ç°ä¸€ä¸ªå®Œæ•´çš„é¢è¯•è°ƒåº¦ç³»ç»Ÿï¼ŒåŒ…å«ï¼š

- Supervisorï¼šé¢è¯•è°ƒåº¦Agentï¼ˆåˆ†é…ä»»åŠ¡ã€æ±‡æ€»ç»“æœï¼‰ã€‚
    
- å­Agent1ï¼šç®€å†åˆ†æAgentï¼ˆè§£æç®€å†æ ¸å¿ƒæŠ€èƒ½ï¼‰ã€‚
    
- å­Agent2ï¼šæŠ€æœ¯é—®é¢˜ç”ŸæˆAgentï¼ˆåŸºäºæŠ€èƒ½ç”Ÿæˆé—®é¢˜ï¼‰ã€‚
    
- å­Agent3ï¼šå›ç­”è¯„ä¼°Agentï¼ˆè¯„ä¼°ç”¨æˆ·å›ç­”ï¼‰ã€‚
    
- å­Agent4ï¼šé¢è¯•æŠ¥å‘ŠAgentï¼ˆç”Ÿæˆæœ€ç»ˆæŠ¥å‘Šï¼‰ã€‚
    

#### æ­¥éª¤1ï¼šåˆ›å»ºå­Agentï¼ˆå¢å¼ºç‰ˆï¼Œå¸¦è‡ªåŠ¨å›è°ƒï¼‰

```Go
// agent/interview_subagents.go
package agent

import (
    "context"
    "log"
    "github.com/cloudwego/eino/adk"
    "github.com/cloudwego/eino/components/model"
    "github.com/cloudwego/eino/schema"
    "your-project-name/chat"
)

// 1. ç®€å†åˆ†æAgentï¼ˆå¢å¼ºç‰ˆï¼šå®Œæˆåå›è°ƒSupervisorï¼‰
func NewResumeAnalysisAgent(supervisorName string) adk.Agent {
    // åŸºç¡€Agenté…ç½®
    baseAgent, err := adk.NewChatModelAgent(context.Background(), &adk.ChatModelAgentConfig{
        Name:        "ResumeAnalysisAgent",
        Description: "è§£æç®€å†ï¼Œæå–æ ¸å¿ƒæŠ€èƒ½ã€é¡¹ç›®ç»éªŒã€è¯„åˆ†",
        Instruction: `ä½ æ˜¯ç®€å†åˆ†æä¸“å®¶ï¼Œè§£æç”¨æˆ·æä¾›çš„ç®€å†ï¼Œè¾“å‡ºæ ¸å¿ƒæŠ€èƒ½ï¼ˆ3-5ä¸ªï¼‰ã€é¡¹ç›®ç»éªŒæ‘˜è¦ã€0-100åˆ†è¯„åˆ†ï¼Œæ ¼å¼ç®€æ´ã€‚`,
        Model:       chat.CreatOpenAiChatModel(context.Background()),
    })
    if err != nil {
        log.Fatal(err)
    }

    // å¢å¼ºï¼šå®Œæˆåè‡ªåŠ¨å›è°ƒSupervisor
    return adk.AgentWithDeterministicTransferTo(context.Background(), &adk.DeterministicTransferConfig{
        Agent:        baseAgent,
        ToAgentNames: []string{supervisorName},
    })
}

// 2. æŠ€æœ¯é—®é¢˜ç”ŸæˆAgentï¼ˆå¢å¼ºç‰ˆï¼‰
func NewTechQuestionAgent(supervisorName string) adk.Agent {
    baseAgent, err := adk.NewChatModelAgent(context.Background(), &adk.ChatModelAgentConfig{
        Name:        "TechQuestionAgent",
        Description: "åŸºäºç®€å†æ ¸å¿ƒæŠ€èƒ½ï¼Œç”Ÿæˆ3ä¸ªæŠ€æœ¯é¢è¯•é—®é¢˜",
        Instruction: `ä½ æ˜¯Goåç«¯æŠ€æœ¯é¢è¯•å®˜ï¼ŒåŸºäºç®€å†ä¸­çš„æ ¸å¿ƒæŠ€èƒ½ï¼Œç”Ÿæˆ3ä¸ªæŠ€æœ¯é—®é¢˜ï¼ˆå«åŸºç¡€ã€è¿›é˜¶ã€é¡¹ç›®ç›¸å…³ï¼‰ï¼Œæ ¼å¼æ¸…æ™°ã€‚`,
        Model:       chat.CreatOpenAiChatModel(context.Background()),
    })
    if err != nil {
        log.Fatal(err)
    }
    return adk.AgentWithDeterministicTransferTo(context.Background(), &adk.DeterministicTransferConfig{
        Agent:        baseAgent,
        ToAgentNames: []string{supervisorName},
    })
}

// 3. å›ç­”è¯„ä¼°Agentï¼ˆå¢å¼ºç‰ˆï¼‰
func NewAnswerEvalAgent(supervisorName string) adk.Agent {
    baseAgent, err := adk.NewChatModelAgent(context.Background(), &adk.ChatModelAgentConfig{
        Name:        "AnswerEvalAgent",
        Description: "è¯„ä¼°ç”¨æˆ·çš„é¢è¯•å›ç­”ï¼Œç»™å‡ºè¯„åˆ†å’Œæ”¹è¿›å»ºè®®",
        Instruction: `ä½ æ˜¯æŠ€æœ¯é¢è¯•è¯„ä¼°ä¸“å®¶ï¼ŒåŸºäºé—®é¢˜å’Œç”¨æˆ·å›ç­”ï¼Œç»™å‡º0-10åˆ†è¯„åˆ†å’Œ1-2æ¡æ”¹è¿›å»ºè®®ï¼Œæ ¼å¼ç®€æ´ã€‚`,
        Model:       chat.CreatOpenAiChatModel(context.Background()),
    })
    if err != nil {
        log.Fatal(err)
    }
    return adk.AgentWithDeterministicTransferTo(context.Background(), &adk.DeterministicTransferConfig{
        Agent:        baseAgent,
        ToAgentNames: []string{supervisorName},
    })
}

// 4. é¢è¯•æŠ¥å‘ŠAgentï¼ˆå¢å¼ºç‰ˆï¼‰
func NewInterviewReportAgent(supervisorName string) adk.Agent {
    baseAgent, err := adk.NewChatModelAgent(context.Background(), &adk.ChatModelAgentConfig{
        Name:        "InterviewReportAgent",
        Description: "æ±‡æ€»é¢è¯•å…¨ç¨‹ç»“æœï¼Œç”Ÿæˆç»“æ„åŒ–é¢è¯•æŠ¥å‘Š",
        Instruction: `ä½ æ˜¯é¢è¯•æŠ¥å‘Šä¸“å®¶ï¼Œæ±‡æ€»ç®€å†åˆ†æã€é—®é¢˜ã€å›ç­”è¯„ä¼°ï¼Œç”ŸæˆåŒ…å«å€™é€‰äººåŸºæœ¬ä¿¡æ¯ã€æŠ€èƒ½åŒ¹é…åº¦ã€å›ç­”è¯„åˆ†ã€å½•ç”¨å»ºè®®çš„æŠ¥å‘Šã€‚`,
        Model:       chat.CreatOpenAiChatModel(context.Background()),
    })
    if err != nil {
        log.Fatal(err)
    }
    return adk.AgentWithDeterministicTransferTo(context.Background(), &adk.DeterministicTransferConfig{
        Agent:        baseAgent,
        ToAgentNames: []string{supervisorName},
    })
}
```

  

#### æ­¥éª¤2ï¼šåˆ›å»ºSupervisorï¼ˆé¢è¯•è°ƒåº¦Agentï¼‰

```Go
// agent/interview_supervisor.go
package agent

import (
    "context"
    "log"
    "github.com/cloudwego/eino/adk"
    "github.com/cloudwego/eino/components/model"
    "github.com/cloudwego/eino/schema"
    "your-project-name/chat"
)

// é¢è¯•è°ƒåº¦Supervisor
func NewInterviewSupervisorAgent() adk.Agent {
    supervisorName := "InterviewSupervisor" // å›ºå®šåç§°ï¼Œå­Agentå›è°ƒç”¨

    // æ­¥éª¤1ï¼šåˆ›å»ºæ‰€æœ‰å¢å¼ºå­Agentï¼ˆä¼ å…¥Supervisoråç§°ï¼‰
    resumeAgent := NewResumeAnalysisAgent(supervisorName)
    questionAgent := NewTechQuestionAgent(supervisorName)
    evalAgent := NewAnswerEvalAgent(supervisorName)
    reportAgent := NewInterviewReportAgent(supervisorName)

    // æ­¥éª¤2ï¼šé…ç½®Supervisoræ ¸å¿ƒé€»è¾‘
    supervisorConfig := &adk.ChatModelAgentConfig{
        Name:        supervisorName,
        Description: "é¢è¯•è°ƒåº¦ä¸­å¿ƒï¼Œåˆ†é…ç®€å†åˆ†æã€é—®é¢˜ç”Ÿæˆã€å›ç­”è¯„ä¼°ã€æŠ¥å‘Šç”Ÿæˆä»»åŠ¡",
        // å…³é”®ï¼šSupervisorçš„Instructionå®šä¹‰ä»»åŠ¡åˆ†é…è§„åˆ™
        Instruction: `ä½ æ˜¯é¢è¯•è°ƒåº¦ä¸“å®¶ï¼Œéµå¾ªä»¥ä¸‹æµç¨‹ï¼š
1. åˆå§‹ä»»åŠ¡ï¼šç”¨æˆ·æä¾›ç®€å†ï¼ˆæ–‡æœ¬æˆ–PDFè·¯å¾„ï¼‰ï¼Œå…ˆè½¬è®©ç»™ResumeAnalysisAgentè§£æï¼›
2. ç®€å†åˆ†æåï¼šè½¬è®©ç»™TechQuestionAgentç”ŸæˆæŠ€æœ¯é—®é¢˜ï¼›
3. ç”¨æˆ·æä¾›å›ç­”åï¼šè½¬è®©ç»™AnswerEvalAgentè¯„ä¼°ï¼›
4. è¯„ä¼°åï¼šè½¬è®©ç»™InterviewReportAgentç”Ÿæˆæœ€ç»ˆæŠ¥å‘Šï¼›
5. æŠ¥å‘Šç”Ÿæˆåï¼šç›´æ¥è¾“å‡ºæŠ¥å‘Šï¼Œç»“æŸæµç¨‹ï¼›
6. æ¯æ­¥å®Œæˆåï¼Œç­‰å¾…ç”¨æˆ·ä¸‹ä¸€æ­¥è¾“å…¥ï¼ˆå¦‚ç”¨æˆ·æä¾›å›ç­”ï¼‰ï¼Œå†è¿›è¡Œä¸‹ä¸€è½®åˆ†é…ã€‚`,
        Model: chat.CreatOpenAiChatModel(context.Background()),
    }

    // æ­¥éª¤3ï¼šåˆ›å»ºSupervisor Agent
    supervisor, err := adk.NewChatModelAgent(context.Background(), supervisorConfig)
    if err != nil {
        log.Fatal(err)
    }

    // æ­¥éª¤4ï¼šæ³¨å†Œå­Agentåˆ°Supervisorï¼ˆå…³é”®ï¼šè®©Supervisorèƒ½æ‰¾åˆ°å­Agentï¼‰
    registeredSupervisor, err := adk.SetSubAgents(context.Background(), supervisor, []adk.Agent{
        resumeAgent,
        questionAgent,
        evalAgent,
        reportAgent,
    })
    if err != nil {
        log.Fatalf("å­Agentæ³¨å†Œå¤±è´¥ï¼š%v", err)
    }

    return registeredSupervisor
}
```

  

#### æ­¥éª¤3ï¼šè¿è¡ŒSupervisoræ¨¡å¼ï¼ˆä¸»ç¨‹åºï¼‰

```Go
// main.go
package main

import (
    "context"
    "log"
    "github.com/cloudwego/eino/adk"
    "your-project-name/agent"
)

func main() {
    ctx := context.Background()

    // 1. åˆ›å»ºSupervisor Agentï¼ˆåŒ…å«æ‰€æœ‰å­Agentï¼‰
    interviewSupervisor := agent.NewInterviewSupervisorAgent()

    // 2. åˆ›å»ºRunner
    runner := adk.NewRunner(ctx, adk.RunnerConfig{
        Agent: interviewSupervisor,
    })

    // 3. å¯åŠ¨é¢è¯•æµç¨‹ï¼ˆç”¨æˆ·è¾“å…¥ç®€å†ï¼‰
    log.Println("====== é¢è¯•æµç¨‹å¯åŠ¨ ======")
    iter := runner.Query(ctx, "è¯·é¢è¯•æˆ‘ï¼Œæˆ‘çš„ç®€å†ï¼šç†Ÿæ‚‰Goè¯­è¨€å¹¶å‘ç¼–ç¨‹ã€Redisç¼“å­˜ã€å¾®æœåŠ¡æ¶æ„ï¼Œå‚ä¸è¿‡ç”µå•†è®¢å•ç³»ç»Ÿå¼€å‘ã€‚")

    // 4. å¤„ç†äº‹ä»¶æµ
    for {
        event, ok := iter.Next()
        if !ok {
            break
        }
        if event.Err != nil {
            log.Fatalf("é¢è¯•æµç¨‹å‡ºé”™ï¼š%v", event.Err)
        }

        // æ‰“å°è½¬è®©äº‹ä»¶
        if event.Action != nil && event.Action.TransferToAgent != nil {
            log.Printf("\nğŸ”„ è°ƒåº¦ä¸­å¿ƒè½¬è®©ä»»åŠ¡ç»™ï¼š%s", event.Action.TransferToAgent.DestAgentName)
            continue
        }

        // æ‰“å°Agentè¾“å‡º
        if event.Output != nil && event.Output.MessageOutput != nil {
            log.Printf("\nğŸ“¢ %s è¾“å‡ºï¼š\n%s", event.AgentName, event.Output.MessageOutput.Message.Content())
            if event.AgentName == "InterviewReportAgent" {
                log.Println("\n====== é¢è¯•æµç¨‹ç»“æŸ ======")
            }
        }
    }
}
```

  

### 2.5 ä»£ç è§£æ

#### ï¼ˆ1ï¼‰å­Agentå¢å¼ºå…³é”®

- æ¯ä¸ªå­Agentéƒ½é€šè¿‡`AgentWithDeterministicTransferTo`å¢å¼ºï¼Œ`ToAgentNames`è®¾ä¸ºSupervisoråç§°ï¼ˆ`InterviewSupervisor`ï¼‰ï¼Œç¡®ä¿æ‰§è¡Œå®Œåè‡ªåŠ¨å›è°ƒã€‚
    
- å­Agentçš„`Description`è¦æ¸…æ™°ï¼ŒSupervisorä¼šé€šè¿‡æè¿°åˆ¤æ–­è¯¥åˆ†é…ç»™å“ªä¸ªAgentã€‚
    

#### ï¼ˆ2ï¼‰Supervisoræ ¸å¿ƒé€»è¾‘

- `Instruction`æ˜¯å…³é”®ï¼šå®šä¹‰äº†ä»»åŠ¡åˆ†é…çš„æµç¨‹ï¼ˆç®€å†åˆ†æâ†’é—®é¢˜ç”Ÿæˆâ†’è¯„ä¼°â†’æŠ¥å‘Šï¼‰ï¼ŒLLMä¼šæ ¹æ®å½“å‰çŠ¶æ€è‡ªåŠ¨å†³ç­–ã€‚
    
- `SetSubAgents`ï¼šæŠŠå­Agentæ³¨å†Œåˆ°Supervisorï¼ŒSupervisorä¼šè‡ªåŠ¨è·å–å­Agentçš„åç§°å’Œæè¿°ï¼Œç”¨äºå†³ç­–ã€‚
    

#### ï¼ˆ3ï¼‰è¿è¡Œæµç¨‹é¢„æœŸ

11. ç”¨æˆ·è¾“å…¥ç®€å†â†’Supervisorè½¬è®©ç»™ResumeAnalysisAgentã€‚
    
12. ç®€å†åˆ†æå®Œæˆâ†’è‡ªåŠ¨å›è°ƒSupervisorâ†’Supervisorè½¬è®©ç»™TechQuestionAgentã€‚
    
13. ç”Ÿæˆé—®é¢˜â†’è‡ªåŠ¨å›è°ƒSupervisorâ†’ç­‰å¾…ç”¨æˆ·è¾“å…¥å›ç­”ã€‚
    
14. ç”¨æˆ·è¾“å…¥å›ç­”â†’Supervisorè½¬è®©ç»™AnswerEvalAgentã€‚
    
15. è¯„ä¼°å®Œæˆâ†’è‡ªåŠ¨å›è°ƒSupervisorâ†’è½¬è®©ç»™InterviewReportAgentã€‚
    
16. ç”ŸæˆæŠ¥å‘Šâ†’è‡ªåŠ¨å›è°ƒSupervisorâ†’Supervisorè¾“å‡ºæŠ¥å‘Šï¼Œæµç¨‹ç»“æŸã€‚
    

### 2.6 ä¸Šä¸‹æ–‡ä¼ é€’åœ¨Supervisorä¸­çš„åº”ç”¨

- Historyï¼šè‡ªåŠ¨ä¿å­˜æ‰€æœ‰Agentçš„æ‰§è¡Œç»“æœï¼ŒSupervisorå’Œå­Agentéƒ½èƒ½è·å–ï¼ˆå¦‚é—®é¢˜ç”ŸæˆAgentè·å–ç®€å†åˆ†æç»“æœï¼‰ã€‚
    
- SessionValuesï¼šæ‰‹åŠ¨å­˜å‚¨å…³é”®æ•°æ®ï¼ˆå¦‚ç®€å†è¯„åˆ†ã€æŠ€èƒ½åˆ—è¡¨ï¼‰ï¼Œé¿å…Historyå†—ä½™ï¼š
    
    ```Go
    // åœ¨ResumeAnalysisAgentä¸­å­˜å‚¨æ ¸å¿ƒæŠ€èƒ½åˆ°SessionValues
    adk.AddSessionValue(ctx, "core_skills", []string{"Goå¹¶å‘", "Redis", "å¾®æœåŠ¡"})
    adk.AddSessionValue(ctx, "resume_score", 85)
    
    // åœ¨TechQuestionAgentä¸­è¯»å–
    coreSkills, _ := adk.GetSessionValue(ctx, "core_skills")
    ```
    

---

  

## 3. Plan-Executeæ¨¡å¼ï¼šå¤æ‚ä»»åŠ¡çš„ã€Œè§„åˆ’-æ‰§è¡Œ-åæ€ã€é—­ç¯

Plan-Executeæ¨¡å¼æ˜¯ä¸ºã€Œå¤æ‚ã€éœ€è¦å¤šæ­¥éª¤æ¨ç†ã€çš„ä»»åŠ¡è®¾è®¡çš„ï¼Œæ¯”å¦‚â€œåŸºäºç®€å†åˆ†æï¼Œæ·±åº¦è°ƒç ”å€™é€‰äººé¡¹ç›®ç›¸å…³çš„æŠ€æœ¯éš¾ç‚¹å¹¶ç”Ÿæˆé¢è¯•é¢˜â€â€”â€”å®ƒä¼šè‡ªåŠ¨æ‹†è§£ä»»åŠ¡ã€æ‰§è¡Œã€æ ¹æ®ç»“æœè°ƒæ•´è®¡åˆ’ï¼Œä¸ç”¨æ‰‹åŠ¨å†™å¾ªç¯é€»è¾‘ã€‚

![](https://awq7m8b63wy.feishu.cn/space/api/box/stream/download/asynccode/?code=OWZhYmI4YjZhM2Q5ODRkY2FhMzI2YzZkM2RiMWM4MThfNVhKZkI0WlAzcjY0THFxWHlyY1I1UTkwTVB1QXhYQjlfVG9rZW46RWFUemIxUGZ0b3VMdmF4SGVGc2Nqd0RxbmtjXzE3Njk0NDMxMjc6MTc2OTQ0NjcyN19WNA)

### 3.1 æ¦‚å¿µé€šä¿—è®²

Plan-Executeæ¨¡å¼å°±åƒâ€œé¡¹ç›®è°ƒç ”å›¢é˜Ÿâ€ï¼ŒåŒ…å«ä¸‰ä¸ªæ ¸å¿ƒè§’è‰²ï¼š

- è§„åˆ’å¸ˆï¼ˆPlannerï¼‰ï¼šæ¥åˆ°å¤æ‚ä»»åŠ¡ï¼ˆå¦‚â€œæ·±åº¦è°ƒç ”ç”µå•†è®¢å•ç³»ç»ŸæŠ€æœ¯éš¾ç‚¹â€ï¼‰ï¼Œæ‹†è§£æˆæ¸…æ™°çš„æ­¥éª¤ï¼ˆå¦‚â€œ1. ç”µå•†è®¢å•ç³»ç»Ÿæ ¸å¿ƒæ¨¡å—ï¼›2. å¸¸è§æŠ€æœ¯éš¾ç‚¹ï¼›3. é’ˆå¯¹æ€§é¢è¯•é¢˜â€ï¼‰ã€‚
    
- æ‰§è¡Œè€…ï¼ˆExecutorï¼‰ï¼šæŒ‰è®¡åˆ’æ‰§è¡Œç¬¬ä¸€æ­¥ï¼Œè°ƒç”¨å·¥å…·ï¼ˆå¦‚æœç´¢å·¥å…·ã€æ•°æ®åº“å·¥å…·ï¼‰å®Œæˆå…·ä½“ä»»åŠ¡ï¼Œè®°å½•ç»“æœã€‚
    
- åæ€å¸ˆï¼ˆReplannerï¼‰ï¼šæ£€æŸ¥æ‰§è¡Œç»“æœï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦ç»§ç»­ï¼ˆå¦‚â€œå·²è·å–æ ¸å¿ƒæ¨¡å—ï¼Œä¸‹ä¸€æ­¥è°ƒç ”éš¾ç‚¹â€ï¼‰æˆ–ç»“æŸï¼ˆå¦‚â€œæ‰€æœ‰æ­¥éª¤å®Œæˆï¼Œç”Ÿæˆæœ€ç»ˆç»“æœâ€ï¼‰ã€‚
    
- æ ¸å¿ƒç‰¹ç‚¹ï¼šè‡ªåŠ¨æ‹†è§£ä»»åŠ¡ã€åŠ¨æ€è°ƒæ•´è®¡åˆ’ã€å·¥å…·é›†æˆã€é—­ç¯æ‰§è¡Œã€‚
    

### 3.2 æ ¸å¿ƒç»“æ„

```Plain
Plan-Executeæ¨¡å¼ = Planner + Executor + Replanner + åè°ƒå™¨
```

17. Plannerï¼šç”Ÿæˆåˆå§‹è®¡åˆ’ï¼ˆç»“æ„åŒ–æ­¥éª¤åˆ—è¡¨ï¼‰ï¼Œå­˜å‚¨åœ¨Sessionä¸­ã€‚
    
18. Executorï¼šæ‰§è¡Œè®¡åˆ’çš„é¦–ä¸ªæ­¥éª¤ï¼Œè°ƒç”¨å·¥å…·ï¼Œå­˜å‚¨æ‰§è¡Œç»“æœã€‚
    
19. Replannerï¼šè¯„ä¼°ç»“æœï¼Œç”Ÿæˆæ–°è®¡åˆ’ï¼ˆå‰©ä½™æ­¥éª¤ï¼‰æˆ–ç»ˆæ­¢ä»»åŠ¡ã€‚
    
20. åè°ƒå™¨ï¼šç»„åˆä¸‰è€…ï¼Œå½¢æˆâ€œè§„åˆ’â†’æ‰§è¡Œâ†’åæ€â†’è§„åˆ’â€çš„å¾ªç¯ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆã€‚
    

### 3.3 åä½œæµç¨‹

21. åˆå§‹åŒ–ï¼šç”¨æˆ·è¾“å…¥å¤æ‚ä»»åŠ¡ï¼ˆå¦‚â€œåŸºäºç®€å†ä¸­çš„ç”µå•†è®¢å•ç³»ç»Ÿï¼Œæ·±åº¦è°ƒç ”å…¶æŠ€æœ¯éš¾ç‚¹å¹¶ç”Ÿæˆ3ä¸ªé¢è¯•é¢˜â€ï¼‰ã€‚
    
22. è§„åˆ’é˜¶æ®µï¼šPlannerç”Ÿæˆåˆå§‹Planï¼ˆæ­¥éª¤åˆ—è¡¨ï¼‰ï¼Œå­˜å‚¨åˆ°Sessionã€‚
    
23. æ‰§è¡Œ-åæ€å¾ªç¯ï¼š
    

a. æ‰§è¡Œï¼šExecutorä»Planä¸­æå–é¦–ä¸ªæ­¥éª¤ï¼Œè°ƒç”¨å·¥å…·æ‰§è¡Œï¼Œç»“æœå­˜å…¥Sessionã€‚

b. åæ€ï¼šReplannerè¯„ä¼°ç»“æœï¼š

- ä»»åŠ¡æœªå®Œæˆï¼šç”ŸæˆåŒ…å«å‰©ä½™æ­¥éª¤çš„æ–°Planï¼Œæ›´æ–°Sessionã€‚
    
- ä»»åŠ¡å®Œæˆï¼šè°ƒç”¨RespondToolç”Ÿæˆæœ€ç»ˆå“åº”ï¼Œé€€å‡ºå¾ªç¯ã€‚
    

24. ç»ˆæ­¢æ¡ä»¶ï¼šä»»åŠ¡å®Œæˆæˆ–è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼ˆMaxIterationsï¼‰ã€‚
    

### 3.4 å®Œæ•´ç¤ºä¾‹ï¼ˆç®€å†æ·±åº¦è°ƒç ”ç³»ç»Ÿï¼‰

æˆ‘ä»¬å®ç°ä¸€ä¸ªâ€œåŸºäºç®€å†é¡¹ç›®ï¼Œæ·±åº¦è°ƒç ”æŠ€æœ¯éš¾ç‚¹å¹¶ç”Ÿæˆé¢è¯•é¢˜â€çš„ç³»ç»Ÿï¼ŒåŒ…å«ï¼š

- Plannerï¼šç”Ÿæˆè°ƒç ”æ­¥éª¤ã€‚
    
- Executorï¼šè°ƒç”¨æœç´¢å·¥å…·æ‰§è¡Œè°ƒç ”ã€‚
    
- Replannerï¼šè¯„ä¼°è°ƒç ”ç»“æœï¼Œè°ƒæ•´è®¡åˆ’ã€‚
    

#### æ­¥éª¤1ï¼šå®‰è£…ä¾èµ–ï¼ˆæœç´¢å·¥å…·ï¼‰

```Bash
go get github.com/cloudwego/eino-ext/components/tool/duckduckgo/v2
```

  

#### æ­¥éª¤2ï¼šå®ç°Plan-Executeæ ¸å¿ƒç»„ä»¶

```Go
// agent/plan_execute_agent.go
package agent

import (
    "context"
    "log"
    "os"
    "time"
    "github.com/cloudwego/eino/adk"
    "github.com/cloudwego/eino/adk/prebuilt/planexecute"
    "github.com/cloudwego/eino/components/model"
    "github.com/cloudwego/eino/components/tool"
    "github.com/cloudwego/eino/compose"
    "github.com/cloudwego/eino-ext/components/model/openai"
    "github.com/cloudwego/eino-ext/components/tool/duckduckgo/v2"
    "github.com/cloudwego/eino/schema"
)

// æ­¥éª¤1ï¼šåˆ›å»ºæ”¯æŒå·¥å…·è°ƒç”¨çš„LLMæ¨¡å‹
func newToolCallingModel(ctx context.Context) model.ToolCallingChatModel {
    apiKey := os.Getenv("OPENAI_API_KEY")
    if apiKey == "" {
        log.Fatal("è¯·è®¾ç½®ç¯å¢ƒå˜é‡ OPENAI_API_KEY")
    }
    // OpenAIæ¨¡å‹é…ç½®ï¼ˆæ”¯æŒå·¥å…·è°ƒç”¨ï¼‰
    model, err := openai.NewChatModel(ctx, &openai.ChatModelConfig{
        APIKey: apiKey,
        Model:  "gpt-5", // å¿…é¡»æ”¯æŒå·¥å…·è°ƒç”¨
    })
    if err != nil {
        log.Fatalf("åˆ›å»ºæ¨¡å‹å¤±è´¥ï¼š%v", err)
    }
    return model
}

// æ­¥éª¤2ï¼šåˆ›å»ºæœç´¢å·¥å…·ï¼ˆExecutorç”¨äºè°ƒç ”ï¼‰
func newSearchTool(ctx context.Context) tool.BaseTool {
    // é…ç½®DuckDuckGoæœç´¢å·¥å…·
    searchConfig := &duckduckgo.Config{
        MaxResults: 10,  // æœ€å¤šè¿”å›10æ¡ç»“æœ
        Region:     duckduckgo.RegionWT, // å…¨çƒåœ°åŒº
        Timeout:    10 * time.Second,  // è¶…æ—¶æ—¶é—´
    }
    searchTool, err := duckduckgo.NewTextSearchTool(ctx, searchConfig)
    if err != nil {
        log.Fatalf("åˆ›å»ºæœç´¢å·¥å…·å¤±è´¥ï¼š%v", err)
    }
    return searchTool
}

// æ­¥éª¤3ï¼šåˆ›å»ºPlannerï¼ˆè§„åˆ’å¸ˆï¼‰
func newPlanner(ctx context.Context, model model.ToolCallingChatModel) adk.Agent {
    planner, err := planexecute.NewPlanner(ctx, &planexecute.PlannerConfig{
        ToolCallingChatModel: model,          // å·¥å…·è°ƒç”¨æ¨¡å‹
        ToolInfo:             &planexecute.PlanToolInfo, // é»˜è®¤Planæ ¼å¼ï¼ˆJSON Schemaï¼‰
    })
    if err != nil {
        log.Fatalf("åˆ›å»ºPlannerå¤±è´¥ï¼š%v", err)
    }
    return planner
}

// æ­¥éª¤4ï¼šåˆ›å»ºExecutorï¼ˆæ‰§è¡Œè€…ï¼‰
func newExecutor(ctx context.Context, model model.ToolCallingChatModel) adk.Agent {
    // é…ç½®Executorçš„å·¥å…·é›†ï¼ˆä»…æœç´¢å·¥å…·ï¼‰
    toolsConfig := adk.ToolsConfig{
        ToolsNodeConfig: compose.ToolsNodeConfig{
            Tools: []tool.BaseTool{newSearchTool(ctx)},
        },
    }

    executor, err := planexecute.NewExecutor(ctx, &planexecute.ExecutorConfig{
        Model:         model,
        ToolsConfig:   toolsConfig,
        MaxIterations: 5, // æ¯ä¸ªæ­¥éª¤æœ€å¤š5è½®å·¥å…·è°ƒç”¨
    })
    if err != nil {
        log.Fatalf("åˆ›å»ºExecutorå¤±è´¥ï¼š%v", err)
    }
    return executor
}

// æ­¥éª¤5ï¼šåˆ›å»ºReplannerï¼ˆåæ€å¸ˆï¼‰
func newReplanner(ctx context.Context, model model.ToolCallingChatModel) adk.Agent {
    replanner, err := planexecute.NewReplanner(ctx, &planexecute.ReplannerConfig{
        ChatModel: model, // å·¥å…·è°ƒç”¨æ¨¡å‹
        // å¯é€‰ï¼šè‡ªå®šä¹‰PlanToolå’ŒRespondToolï¼Œé»˜è®¤ä½¿ç”¨å†…ç½®
    })
    if err != nil {
        log.Fatalf("åˆ›å»ºReplannerå¤±è´¥ï¼š%v", err)
    }
    return replanner
}

// æ­¥éª¤6ï¼šç»„åˆä¸ºPlanExecuteAgent
func NewResumeResearchAgent(ctx context.Context) adk.Agent {
    // åˆå§‹åŒ–æ¨¡å‹
    llmModel := newToolCallingModel(ctx)

    // åˆå§‹åŒ–ä¸‰å¤§æ ¸å¿ƒç»„ä»¶
    planner := newPlanner(ctx, llmModel)
    executor := newExecutor(ctx, llmModel)
    replanner := newReplanner(ctx, llmModel)

    // ç»„åˆä¸ºPlanExecuteAgentï¼ˆæœ€å¤§å¾ªç¯10æ¬¡ï¼Œé¿å…æ— é™å¾ªç¯ï¼‰
    planExecuteAgent, err := planexecute.New(ctx, &planexecute.Config{
        Planner:       planner,
        Executor:      executor,
        Replanner:     replanner,
        MaxIterations: 10, // æœ€å¤šæ‰§è¡Œ10ä¸ªæ­¥éª¤
    })
    if err != nil {
        log.Fatalf("ç»„åˆPlanExecuteAgentå¤±è´¥ï¼š%v", err)
    }

    return planExecuteAgent
}
```

  

#### æ­¥éª¤3ï¼šè¿è¡ŒPlan-Executeæ¨¡å¼ï¼ˆä¸»ç¨‹åºï¼‰

```Go
// main_plan_execute.go
package main

import (
    "context"
    "log"
    "github.com/cloudwego/eino/adk"
    "github.com/cloudwego/eino/schema"
    "your-project-name/agent"
)

func main() {
    ctx := context.Background()

    // 1. åˆ›å»ºPlanExecuteAgentï¼ˆç®€å†æ·±åº¦è°ƒç ”Agentï¼‰
    researchAgent := agent.NewResumeResearchAgent(ctx)

    // 2. åˆ›å»ºRunner
    runner := adk.NewRunner(ctx, adk.RunnerConfig{
        Agent:           researchAgent,
        EnableStreaming: true,
    })

    // 3. è¾“å…¥å¤æ‚ä»»åŠ¡ï¼ˆåŸºäºç®€å†é¡¹ç›®çš„æ·±åº¦è°ƒç ”ï¼‰
    userTask := schema.UserMessage(`åŸºäºå€™é€‰äººç®€å†ä¸­çš„"ç”µå•†è®¢å•ç³»ç»Ÿ"é¡¹ç›®ï¼Œå®Œæˆä»¥ä¸‹ä»»åŠ¡ï¼š
1. è°ƒç ”ç”µå•†è®¢å•ç³»ç»Ÿçš„æ ¸å¿ƒæ¨¡å—å’ŒæŠ€æœ¯éš¾ç‚¹ï¼›
2. ç»“åˆGoè¯­è¨€å¹¶å‘ç¼–ç¨‹ã€Redisç¼“å­˜æŠ€æœ¯ï¼Œç”Ÿæˆ3ä¸ªé’ˆå¯¹æ€§é¢è¯•é¢˜ï¼›
3. æ¯ä¸ªé¢è¯•é¢˜é™„å¸¦è€ƒå¯Ÿç‚¹å’Œå‚è€ƒç­”æ¡ˆã€‚`)

    // 4. è¿è¡Œå¹¶å¤„ç†ç»“æœ
    log.Println("====== æ·±åº¦è°ƒç ”å¯åŠ¨ ======")
    iter := runner.Run(ctx, []adk.Message{userTask})

    for {
        event, ok := iter.Next()
        if !ok {
            break
        }
        if event.Err != nil {
            log.Printf("è°ƒç ”å‡ºé”™ï¼š%v", event.Err)
            break
        }

        // æ‰“å°è¾“å‡ºç»“æœï¼ˆåŒºåˆ†Planã€æ‰§è¡Œç»“æœã€æœ€ç»ˆæŠ¥å‘Šï¼‰
        if event.Output != nil && event.Output.MessageOutput != nil {
            msg := event.Output.MessageOutput.Message
            switch event.AgentName {
            case "Planner":
                log.Printf("\nğŸ“‹ ç”Ÿæˆåˆå§‹è®¡åˆ’ï¼š\n%s", msg.Content())
            case "Executor":
                log.Printf("\nğŸ› ï¸  æ‰§è¡Œç»“æœï¼š\n%s", msg.Content())
            case "Replanner":
                newPlan := msg.Content()
                if newPlan != "" {
                    log.Printf("\nğŸ”„ è°ƒæ•´åè®¡åˆ’ï¼š\n%s", newPlan)
                } else {
                    log.Printf("\nğŸ“Š æœ€ç»ˆè°ƒç ”ç»“æœï¼š\n%s", msg.Content())
                }
            }
        }
    }
    log.Println("\n====== æ·±åº¦è°ƒç ”ç»“æŸ ======")
}
```

  

### 3.5 ä»£ç è§£æ

#### ï¼ˆ1ï¼‰æ ¸å¿ƒç»„ä»¶ä½œç”¨

- Plannerï¼šç”Ÿæˆç»“æ„åŒ–Planï¼ˆJSONæ ¼å¼æ­¥éª¤åˆ—è¡¨ï¼‰ï¼Œå­˜å‚¨åœ¨Sessionçš„`PlanSessionKey`ä¸­ã€‚
    
- Executorï¼šæ¯æ¬¡åªæ‰§è¡ŒPlançš„ç¬¬ä¸€ä¸ªæ­¥éª¤ï¼Œè°ƒç”¨å·¥å…·ï¼ˆå¦‚æœç´¢â€œç”µå•†è®¢å•ç³»ç»Ÿæ ¸å¿ƒæ¨¡å—â€ï¼‰ï¼Œç»“æœå­˜å‚¨åœ¨`ExecutedStepsSessionKey`ã€‚
    
- Replannerï¼šè¯»å–Planå’Œå·²æ‰§è¡Œç»“æœï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦ç»§ç»­ï¼š
    
    - ç»§ç»­ï¼šç”Ÿæˆæ–°Planï¼ˆç§»é™¤å·²å®Œæˆæ­¥éª¤ï¼Œè¡¥å……æ–°æ­¥éª¤ï¼‰ã€‚
        
    - ç»“æŸï¼šè°ƒç”¨`RespondTool`ç”Ÿæˆæœ€ç»ˆå“åº”ï¼ˆé¢è¯•é¢˜+è€ƒå¯Ÿç‚¹+ç­”æ¡ˆï¼‰ã€‚
        

#### ï¼ˆ2ï¼‰å·¥å…·é›†æˆ

- Executoré…ç½®äº†DuckDuckGoæœç´¢å·¥å…·ï¼Œå¯æ›¿æ¢ä¸ºé¡¹ç›®ä¸­çš„å·¥å…·ï¼ˆå¦‚PDFè§£æå·¥å…·ã€æ•°æ®åº“æŸ¥è¯¢å·¥å…·ï¼‰ã€‚
    
- æ”¯æŒå¤šå·¥å…·å¹¶å‘è°ƒç”¨ï¼ˆå¦‚åŒæ—¶æœç´¢â€œæ ¸å¿ƒæ¨¡å—â€å’Œâ€œæŠ€æœ¯éš¾ç‚¹â€ï¼‰ã€‚
    

#### ï¼ˆ3ï¼‰è¿è¡Œæµç¨‹é¢„æœŸ

25. Plannerç”Ÿæˆè®¡åˆ’ï¼š
    
    1. æ­¥éª¤1ï¼šæœç´¢ç”µå•†è®¢å•ç³»ç»Ÿçš„æ ¸å¿ƒæ¨¡å—ï¼ˆä¸‹å•ã€æ”¯ä»˜ã€åº“å­˜ã€ç‰©æµï¼‰ã€‚
        
    2. æ­¥éª¤2ï¼šæœç´¢Goè¯­è¨€å®ç°ç”µå•†è®¢å•ç³»ç»Ÿçš„æŠ€æœ¯éš¾ç‚¹ï¼ˆå¹¶å‘è®¢å•ã€åº“å­˜è¶…å–ã€åˆ†å¸ƒå¼äº‹åŠ¡ï¼‰ã€‚
        
    3. æ­¥éª¤3ï¼šç»“åˆRedisç¼“å­˜ï¼Œç”Ÿæˆé’ˆå¯¹æ€§é¢è¯•é¢˜ã€‚
        
    4. æ­¥éª¤4ï¼šä¸ºæ¯ä¸ªé¢˜ç›®æ·»åŠ è€ƒå¯Ÿç‚¹å’Œå‚è€ƒç­”æ¡ˆã€‚
        
26. Executoræ‰§è¡Œæ­¥éª¤1ï¼Œæœç´¢æ ¸å¿ƒæ¨¡å—ï¼Œè¿”å›ç»“æœã€‚
    
27. Replannerè¯„ä¼°ï¼šæ­¥éª¤1å®Œæˆï¼Œç”Ÿæˆæ–°Planï¼ˆæ­¥éª¤2-4ï¼‰ã€‚
    
28. Executoræ‰§è¡Œæ­¥éª¤2ï¼Œæœç´¢æŠ€æœ¯éš¾ç‚¹ï¼Œè¿”å›ç»“æœã€‚
    
29. Replannerè¯„ä¼°ï¼šæ­¥éª¤2å®Œæˆï¼Œç”Ÿæˆæ–°Planï¼ˆæ­¥éª¤3-4ï¼‰ã€‚
    
30. Executoræ‰§è¡Œæ­¥éª¤3ï¼Œç”Ÿæˆé¢è¯•é¢˜ï¼Œè¿”å›ç»“æœã€‚
    
31. Replannerè¯„ä¼°ï¼šæ­¥éª¤3å®Œæˆï¼Œç”Ÿæˆæ–°Planï¼ˆæ­¥éª¤4ï¼‰ã€‚
    
32. Executoræ‰§è¡Œæ­¥éª¤4ï¼Œæ·»åŠ è€ƒå¯Ÿç‚¹å’Œç­”æ¡ˆï¼Œè¿”å›ç»“æœã€‚
    
33. Replannerè¯„ä¼°ï¼šæ‰€æœ‰æ­¥éª¤å®Œæˆï¼Œç”Ÿæˆæœ€ç»ˆæŠ¥å‘Šï¼Œæµç¨‹ç»“æŸã€‚
    

### 3.6 ä¸Loopæ¨¡å¼çš„åŒºåˆ«

- Loopæ¨¡å¼ï¼šå›ºå®šæ­¥éª¤å¾ªç¯ï¼Œä¸åŠ¨æ€è°ƒæ•´ï¼ˆå¦‚å›ºå®šâ€œç”Ÿæˆé—®é¢˜â†’è¯„ä¼°â€å¾ªç¯ï¼‰ã€‚
    
- Plan-Executeæ¨¡å¼ï¼šåŠ¨æ€æ­¥éª¤ï¼Œæ ¹æ®æ‰§è¡Œç»“æœè°ƒæ•´è®¡åˆ’ï¼ˆå¦‚è°ƒç ”ä¸­å‘ç°æ–°éš¾ç‚¹ï¼Œè‡ªåŠ¨æ·»åŠ æ­¥éª¤ï¼‰ã€‚
    

---

  

## 4. å¤šAgentä¸­æ–­ä¸æ¢å¤ï¼ˆåº”å¯¹ä¸ç¡®å®šæ€§åœºæ™¯ï¼‰

åœ¨å¤šAgentåä½œä¸­ï¼Œå¯èƒ½é‡åˆ°ç”¨æˆ·ä¸­é€”ä¸­æ–­ï¼ˆå¦‚é¢è¯•ä¸­ç”¨æˆ·æš‚åœã€è¡¥å……ä¿¡æ¯ï¼‰ï¼ŒEinoæ”¯æŒä¸­æ–­ä¸æ¢å¤åŠŸèƒ½ï¼Œä¿æŒä¸Šä¸‹æ–‡ä¸ä¸¢å¤±ã€‚

  

### 4.1 æ¦‚å¿µé€šä¿—è®²

ä¸­æ–­ä¸æ¢å¤å°±åƒâ€œæš‚åœç”µå½±â€ï¼š

- ä¸­æ–­ï¼šåä½œæµç¨‹ä¸­ï¼ŒAgentäº§ç”Ÿ`InterruptAction`ï¼ˆå¦‚ç”¨æˆ·éœ€è¦è¡¥å……ç®€å†ä¿¡æ¯ï¼‰ï¼Œæµç¨‹æš‚åœï¼Œä¿å­˜å½“å‰çŠ¶æ€ï¼ˆHistoryã€SessionValuesã€æ‰§è¡Œè¿›åº¦ï¼‰ã€‚
    
- æ¢å¤ï¼šç”¨æˆ·è¡¥å……ä¿¡æ¯åï¼Œä»æš‚åœç‚¹ç»§ç»­æ‰§è¡Œï¼Œæ— éœ€é‡æ–°å¼€å§‹ï¼ˆå¦‚é¢è¯•ä¸­ç”¨æˆ·è¡¥å……é¡¹ç›®ç»†èŠ‚åï¼Œç»§ç»­ç”Ÿæˆé—®é¢˜ï¼‰ã€‚
    

### 4.2 æ ¸å¿ƒå®ç°

#### ï¼ˆ1ï¼‰è§¦å‘ä¸­æ–­

é€šè¿‡`compose.NewInterruptAndRerunErr`ç”Ÿæˆä¸­æ–­é”™è¯¯ï¼ŒAgentä¼šè§¦å‘ä¸­æ–­ï¼š

```Go
// åœ¨ç®€å†åˆ†æAgentä¸­ï¼Œè‹¥ç”¨æˆ·æœªæä¾›é¡¹ç›®ç»†èŠ‚ï¼Œè§¦å‘ä¸­æ–­
func (a *ResumeAnalysisAgent) InvokableRun(ctx context.Context, argsJSON string) (string, error) {
    resumeText := extractResumeText(argsJSON)
    if !strings.Contains(resumeText, "é¡¹ç›®ç»éªŒ") {
        // è§¦å‘ä¸­æ–­ï¼Œæç¤ºç”¨æˆ·è¡¥å……ä¿¡æ¯
        return "", compose.NewInterruptAndRerunErr("è¯·è¡¥å……é¡¹ç›®ç»éªŒç»†èŠ‚ï¼Œä»¥ä¾¿ç”Ÿæˆé’ˆå¯¹æ€§é¢è¯•é¢˜")
    }
    // æ­£å¸¸æ‰§è¡Œ
    return analyzeResume(resumeText), nil
}
```

  

#### ï¼ˆ2ï¼‰é…ç½®æ¢å¤å­˜å‚¨

éœ€è¦åœ¨Runnerä¸­é…ç½®`CheckPointStore`ï¼ˆå­˜å‚¨ä¸­æ–­çŠ¶æ€ï¼‰ï¼ŒEinoæä¾›`InMemoryStore`ï¼ˆå†…å­˜å­˜å‚¨ï¼Œé€‚åˆæµ‹è¯•ï¼‰ï¼š

```Go
// åˆ›å»ºå†…å­˜å­˜å‚¨ï¼ˆç”Ÿäº§ç¯å¢ƒå¯ç”¨Redisç­‰æŒä¹…åŒ–å­˜å‚¨ï¼‰
func newInMemoryStore() compose.CheckPointStore {
    return &compose.InMemoryStore{}
}

// é…ç½®Runneræ”¯æŒä¸­æ–­æ¢å¤
runner := adk.NewRunner(ctx, adk.RunnerConfig{
    Agent:           supervisorAgent,
    CheckPointStore: newInMemoryStore(), // å…³é”®ï¼šå­˜å‚¨ä¸­æ–­çŠ¶æ€
})
```

  

#### ï¼ˆ3ï¼‰æ¢å¤æ‰§è¡Œ

é€šè¿‡`runner.Resume`æ–¹æ³•æ¢å¤ï¼Œä¼ å…¥`CheckPointID`ï¼ˆä¸­æ–­æ—¶çš„IDï¼‰å’Œè¡¥å……ä¿¡æ¯ï¼š

```Go
// ä¸­æ–­åï¼Œç”¨æˆ·è¡¥å……ä¿¡æ¯ï¼Œæ¢å¤æ‰§è¡Œ
func resumeInterview(ctx context.Context, runner *adk.Runner, checkPointID string, userInput string) {
    // è¡¥å……ä¿¡æ¯ä½œä¸ºå·¥å…·å‚æ•°
    toolOpts := []tool.Option{tool.WithNewInput(userInput)}
    // æ¢å¤æ‰§è¡Œ
    iter, err := runner.Resume(ctx, checkPointID, adk.WithToolOptions(toolOpts))
    if err != nil {
        log.Fatal(err)
    }
    // å¤„ç†æ¢å¤åçš„äº‹ä»¶æµï¼ˆåŒæ­£å¸¸è¿è¡Œï¼‰
    for {
        event, ok := iter.Next()
        if !ok {
            break
        }
        // å¤„ç†äº‹ä»¶...
    }
}
```

  

### 4.3 å®Œæ•´ç¤ºä¾‹ï¼ˆé¢è¯•ä¸­æ–­ä¸æ¢å¤ï¼‰

```Go
// main_interrupt_resume.go
package main

import (
    "context"
    "log"
    "bufio"
    "os"
    "github.com/cloudwego/eino/adk"
    "github.com/cloudwego/eino/compose"
    "github.com/cloudwego/eino/schema"
    "your-project-name/agent"
)

func main() {
    ctx := context.Background()

    // 1. åˆ›å»ºSupervisor Agent
    supervisorAgent := agent.NewInterviewSupervisorAgent()

    // 2. åˆ›å»ºæ”¯æŒä¸­æ–­æ¢å¤çš„Runner
    checkpointStore := &compose.InMemoryStore{}
    runner := adk.NewRunner(ctx, adk.RunnerConfig{
        Agent:           supervisorAgent,
        CheckPointStore: checkpointStore,
        EnableStreaming: true,
    })

    // 3. å¯åŠ¨é¢è¯•ï¼Œä¼ å…¥ä¸å®Œæ•´ç®€å†ï¼ˆè§¦å‘ä¸­æ–­ï¼‰
    checkPointID := "interview_001" // è‡ªå®šä¹‰CheckPointIDï¼Œç”¨äºæ¢å¤
    log.Println("====== é¢è¯•å¯åŠ¨ï¼ˆä¸å®Œæ•´ç®€å†ï¼‰======")
    iter := runner.Query(ctx, "æˆ‘çš„ç®€å†ï¼šç†Ÿæ‚‰Goå¹¶å‘ç¼–ç¨‹ï¼Œæ— é¡¹ç›®ç»éªŒ", adk.WithCheckPointID(checkPointID))

    var interruptMsg string
    // 4. å¤„ç†äº‹ä»¶æµï¼Œæ•è·ä¸­æ–­
    for {
        event, ok := iter.Next()
        if !ok {
            break
        }
        if event.Err != nil {
            log.Fatal(event.Err)
        }
        // æ•è·ä¸­æ–­äº‹ä»¶
        if event.Action != nil && event.Action.Interrupted != nil {
            interruptMsg = event.Action.Interrupted.Data.(string)
            log.Printf("\nâ¸ï¸  é¢è¯•ä¸­æ–­ï¼š%s", interruptMsg)
            break
        }
    }

    // 5. æ¨¡æ‹Ÿç”¨æˆ·è¡¥å……ä¿¡æ¯
    log.Print("\nè¯·è¾“å…¥è¡¥å……çš„é¡¹ç›®ç»éªŒï¼š")
    scanner := bufio.NewScanner(os.Stdin)
    scanner.Scan()
    userInput := scanner.Text()

    // 6. æ¢å¤é¢è¯•
    log.Println("\n====== æ¢å¤é¢è¯• ======")
    resumeIter, err := runner.Resume(ctx, checkPointID, adk.WithToolOptions([]tool.Option{
        tool.WithNewInput(userInput), // ä¼ å…¥è¡¥å……ä¿¡æ¯
    }))
    if err != nil {
        log.Fatal(err)
    }

    // 7. å¤„ç†æ¢å¤åçš„æµç¨‹
    for {
        event, ok := resumeIter.Next()
        if !ok {
            break
        }
        if event.Err != nil {
            log.Fatal(event.Err)
        }
        // æ‰“å°è¾“å‡º...
    }
}
```

  

---

  

## 5. ç»„åˆæ¨¡å¼åµŒå¥—ï¼ˆæ„å»ºå¤æ‚ä¸šåŠ¡æµç¨‹ï¼‰

å®é™…é¡¹ç›®ä¸­ï¼Œå¸¸éœ€è¦åµŒå¥—å¤šç§åä½œæ¨¡å¼ï¼ˆå¦‚â€œSequential+Supervisorâ€â€œPlan-Execute+Parallelâ€ï¼‰ï¼Œæ„å»ºæ›´å¤æ‚çš„æµç¨‹ã€‚

  

### 5.1 ç¤ºä¾‹ï¼šSequential+Supervisorï¼ˆé¢è¯•æµç¨‹ï¼‰

å¤–å±‚ç”¨SequentialAgentæ§åˆ¶æ•´ä½“æµç¨‹ï¼ˆç®€å†ä¸Šä¼ â†’é¢è¯•â†’æŠ¥å‘Šï¼‰ï¼Œå†…å±‚ç”¨Supervisoræ§åˆ¶é¢è¯•ç¯èŠ‚ï¼ˆé—®é¢˜ç”Ÿæˆâ†’è¯„ä¼°ï¼‰ï¼š

```Go
// æ„å»ºåµŒå¥—ç»„åˆæ¨¡å¼
func NewNestedInterviewAgent(ctx context.Context) adk.Agent {
    // 1. å†…å±‚ï¼šSupervisoræ§åˆ¶é¢è¯•ç¯èŠ‚ï¼ˆé—®é¢˜ç”Ÿæˆâ†’è¯„ä¼°ï¼‰
    interviewSupervisor := agent.NewInterviewSupervisorAgent()

    // 2. å¤–å±‚ï¼šSequentialæ§åˆ¶æ•´ä½“æµç¨‹ï¼ˆç®€å†ä¸Šä¼ â†’é¢è¯•â†’æŠ¥å‘Šï¼‰
    sequentialConfig := &adk.SequentialAgentConfig{
        Name:        "NestedInterviewAgent",
        Description: "å®Œæ•´é¢è¯•æµç¨‹ï¼šç®€å†ä¸Šä¼ â†’é¢è¯•â†’æŠ¥å‘Š",
        SubAgents: []adk.Agent{
            agent.NewResumeUploadAgent(), // æ­¥éª¤1ï¼šç®€å†ä¸Šä¼ ï¼ˆå•Agentï¼‰
            interviewSupervisor,        // æ­¥éª¤2ï¼šé¢è¯•ï¼ˆSupervisoræ¨¡å¼ï¼‰
            agent.NewFinalReportAgent(),// æ­¥éª¤3ï¼šç”Ÿæˆæœ€ç»ˆæŠ¥å‘Šï¼ˆå•Agentï¼‰
        },
    }

    // 3. åˆ›å»ºç»„åˆAgent
    sequentialAgent, err := adk.NewSequentialAgent(ctx, sequentialConfig)
    if err != nil {
        log.Fatal(err)
    }
    return sequentialAgent
}
```

  

### 5.2 ç¤ºä¾‹ï¼šPlan-Execute+Parallelï¼ˆæ·±åº¦è°ƒç ”+å¤šè§’åº¦åˆ†æï¼‰

Plan-Executeå®Œæˆæ·±åº¦è°ƒç ”åï¼Œç”¨ParallelAgentä»æŠ€æœ¯ã€é¡¹ç›®ã€è½¯æŠ€èƒ½è§’åº¦å¹¶è¡Œåˆ†æï¼š

```Go
// åµŒå¥—Plan-Executeå’ŒParallel
func NewResearchAndAnalyzeAgent(ctx context.Context) adk.Agent {
    // 1. Plan-Executeï¼šæ·±åº¦è°ƒç ”é¡¹ç›®æŠ€æœ¯éš¾ç‚¹
    researchAgent := agent.NewResumeResearchAgent(ctx)

    // 2. Parallelï¼šå¤šè§’åº¦å¹¶è¡Œåˆ†æ
    parallelAgent, err := adk.NewParallelAgent(ctx, &adk.ParallelAgentConfig{
        Name:        "MultiAngleAnalyzeAgent",
        Description: "æŠ€æœ¯+é¡¹ç›®+è½¯æŠ€èƒ½å¹¶è¡Œåˆ†æ",
        SubAgents: []adk.Agent{
            agent.NewTechAnalyzeAgent(),   // æŠ€æœ¯è§’åº¦
            agent.NewProjectAnalyzeAgent(),// é¡¹ç›®è§’åº¦
            agent.NewSoftSkillAnalyzeAgent(),// è½¯æŠ€èƒ½è§’åº¦
        },
    })

    // 3. å¤–å±‚Sequentialï¼šè°ƒç ”â†’å¹¶è¡Œåˆ†æ
    sequentialAgent, err := adk.NewSequentialAgent(ctx, &adk.SequentialAgentConfig{
        SubAgents: []adk.Agent{researchAgent, parallelAgent},
    })
    return sequentialAgent
}
```

  

---

  

## 6. æ‹†è§£ä½ é¡¹ç›®ä¸­çš„å¤æ‚åä½œï¼ˆç†è®ºå¯¹æ¥å®æˆ˜ï¼‰

é¢è¯•æ¨¡æ‹Ÿé¡¹ç›®ç›®å‰ç”¨äº†ã€ŒSequential+Loopã€çš„åŸºç¡€ç»„åˆï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºä¸‹ç¯‡çš„å¤æ‚æ¨¡å¼è¿›è¡Œä¼˜åŒ–ï¼Œæ‹†è§£å…¶ä¸­çš„æ½œåœ¨ä¼˜åŒ–ç‚¹ï¼š

  

### 6.1 é¡¹ç›®ç°çŠ¶å›é¡¾

é¡¹ç›®å½“å‰åä½œæµç¨‹ï¼š

```Plain
SequentialAgentï¼ˆç®€å†åˆ†æâ†’LoopAgentï¼ˆé—®é¢˜ç”Ÿæˆâ†’è¯„ä¼°ï¼‰â†’æŠ¥å‘Šç”Ÿæˆï¼‰
```

ä¼˜ç‚¹ï¼šæµç¨‹ç®€å•ã€æ˜“ç»´æŠ¤ï¼›ç¼ºç‚¹ï¼šçµæ´»æ€§ä¸è¶³ï¼ˆå¦‚æ— æ³•åŠ¨æ€è°ƒæ•´é—®é¢˜æ•°é‡ã€æ— æ³•æ·±åº¦è°ƒç ”é¡¹ç›®ï¼‰ã€‚

  

### 6.2 ç”¨Supervisoræ¨¡å¼ä¼˜åŒ–é¢è¯•è°ƒåº¦

å°†é¡¹ç›®ä¸­çš„`InterviewProcessAgent`æ”¹é€ ä¸ºSupervisoræ¨¡å¼ï¼Œå®ç°åŠ¨æ€ä»»åŠ¡åˆ†é…ï¼š

```Go
// é¡¹ç›®ä¸­æ”¹é€ åçš„Supervisorè°ƒåº¦Agent
func NewInterviewProcessAgent() adk.Agent {
    supervisorName := "InterviewSupervisor"

    // å¢å¼ºå­Agentï¼ˆè‡ªåŠ¨å›è°ƒï¼‰
    resumeAgent := NewResumAnalysisAgent(supervisorName)
    questionAgent := NewQuestionGeneratorAgent(supervisorName)
    evalAgent := NewAnswerEvalAgent(supervisorName)
    reportAgent := NewInterviewReportAgent(supervisorName)

    // Supervisoré…ç½®
    supervisorConfig := &adk.ChatModelAgentConfig{
        Name:        supervisorName,
        Description: "é¢è¯•æµç¨‹è°ƒåº¦ä¸­å¿ƒ",
        Instruction: `ä½ æ˜¯é¢è¯•è°ƒåº¦ä¸“å®¶ï¼Œæµç¨‹ï¼š
1. ç”¨æˆ·æä¾›ç®€å†â†’è½¬è®©ç»™ResumAnalysisAgentï¼›
2. ç®€å†åˆ†æåâ†’è½¬è®©ç»™QuestionGeneratorAgentï¼ˆç”Ÿæˆ1ä¸ªé—®é¢˜ï¼‰ï¼›
3. ç”¨æˆ·å›ç­”åâ†’è½¬è®©ç»™AnswerEvalAgentï¼›
4. è¯„ä¼°åï¼šè‹¥ç”¨æˆ·å›ç­”ä¼˜ç§€ï¼Œå†ç”Ÿæˆ1ä¸ªè¿›é˜¶é—®é¢˜ï¼›è‹¥ä¸€èˆ¬ï¼Œç”ŸæˆæŠ¥å‘Šï¼›
5. æœ€å¤šç”Ÿæˆ3ä¸ªé—®é¢˜ï¼Œç„¶åç”ŸæˆæŠ¥å‘Šã€‚`,
        Model: chat.CreatOpenAiChatModel(context.Background()),
    }

    supervisor, _ := adk.NewChatModelAgent(context.Background(), supervisorConfig)
    // æ³¨å†Œå­Agent
    registeredSupervisor, _ := adk.SetSubAgents(context.Background(), supervisor, []adk.Agent{
        resumeAgent, questionAgent, evalAgent, reportAgent,
    })

    return registeredSupervisor
}
```

  

### 6.3 ç”¨Plan-Executeä¼˜åŒ–ç®€å†æ·±åº¦è°ƒç ”

åœ¨ç®€å†åˆ†æåï¼Œå¢åŠ Plan-Executeæ¨¡å¼ï¼Œæ·±åº¦è°ƒç ”é¡¹ç›®æŠ€æœ¯éš¾ç‚¹ï¼š

```Go
// é¡¹ç›®ä¸­æ·»åŠ æ·±åº¦è°ƒç ”ç¯èŠ‚
func NewEnhancedInterviewAgent() adk.Agent {
    // 1. ç®€å†åˆ†æAgent
    resumeAgent := NewResumAnalysisAgent()

    // 2. Plan-Executeæ·±åº¦è°ƒç ”Agent
    researchAgent := NewResumeResearchAgent(context.Background())

    // 3. é¢è¯•è°ƒåº¦Supervisor
    interviewSupervisor := NewInterviewProcessAgent()

    // å¤–å±‚Sequentialï¼šç®€å†åˆ†æâ†’æ·±åº¦è°ƒç ”â†’é¢è¯•è°ƒåº¦
    sequentialAgent, _ := adk.NewSequentialAgent(context.Background(), &adk.SequentialAgentConfig{
        SubAgents: []adk.Agent{resumeAgent, researchAgent, interviewSupervisor},
    })

    return sequentialAgent
}
```

  

### 6.4 ä¼˜åŒ–åçš„ä¼˜åŠ¿

- åŠ¨æ€è°ƒæ•´ï¼šæ ¹æ®ç”¨æˆ·å›ç­”è´¨é‡ï¼ŒåŠ¨æ€ç”Ÿæˆé—®é¢˜æ•°é‡ï¼ˆ1-3ä¸ªï¼‰ã€‚
    
- æ·±åº¦å®šåˆ¶ï¼šåŸºäºé¡¹ç›®è°ƒç ”ï¼Œç”Ÿæˆé’ˆå¯¹æ€§é¢è¯•é¢˜ï¼Œè€Œéé€šç”¨é¢˜ã€‚
    
- æµç¨‹é—­ç¯ï¼šå­Agentè‡ªåŠ¨å›è°ƒï¼Œæ— éœ€æ‰‹åŠ¨æ§åˆ¶æµè½¬ã€‚
    

---

  

## 7. å¸¸è§é—®é¢˜ä¸æ’æŸ¥

### 7.1 Supervisorå’ŒSubAgentsçš„åŒºåˆ«

- SubAgentsï¼šå­Agentè‡ªä¸»å†³ç­–è·³è½¬ï¼ˆå¦‚RouterAgentè‡ªä¸»é€‰æ‹©å­Agentï¼‰ï¼Œæ— å›ºå®šå›è°ƒã€‚
    
- Supervisorï¼šä¸­å¿ƒåŒ–è°ƒåº¦ï¼Œå­Agentæ‰§è¡Œå®Œåè‡ªåŠ¨å›è°ƒï¼Œæµç¨‹å¯æ§ã€‚
    

### 7.2 Plan-Executeæ¨¡å¼å¾ªç¯ä¸ç»ˆæ­¢

- åŸå› ï¼šReplanneræœªåˆ¤æ–­ä»»åŠ¡å®Œæˆï¼Œéœ€åœ¨`Instruction`ä¸­æ˜ç¡®ç»ˆæ­¢æ¡ä»¶ï¼ˆå¦‚â€œç”Ÿæˆ3ä¸ªé—®é¢˜åç»ˆæ­¢â€ï¼‰ã€‚
    
- è§£å†³ï¼šåœ¨Replannerçš„Instructionä¸­æ·»åŠ ï¼šâ€œè‹¥å·²ç”Ÿæˆ3ä¸ªé¢è¯•é¢˜ï¼Œç›´æ¥ç”Ÿæˆæœ€ç»ˆæŠ¥å‘Šï¼Œæ— éœ€ç»§ç»­è®¡åˆ’â€ã€‚
    

### 7.3 ä¸­æ–­åæ¢å¤å¤±è´¥

- åŸå› ï¼šæœªé…ç½®`CheckPointStore`ï¼Œæˆ–`CheckPointID`é”™è¯¯ã€‚
    
- è§£å†³ï¼šRunnerå¿…é¡»é…ç½®`CheckPointStore`ï¼Œæ¢å¤æ—¶ä½¿ç”¨ä¸­æ–­æ—¶çš„`CheckPointID`ã€‚
    

### 7.4 å­Agentæœªè‡ªåŠ¨å›è°ƒSupervisor

- åŸå› ï¼šå­Agentæœªé€šè¿‡`WithDeterministicTransferTo`å¢å¼ºï¼Œæˆ–`ToAgentNames`ä¸Supervisoråç§°ä¸ä¸€è‡´ã€‚
    
- è§£å†³ï¼šç¡®ä¿å­Agentå·²å¢å¼ºï¼Œä¸”`ToAgentNames`ä¸Supervisorçš„`Name`å®Œå…¨ä¸€è‡´ã€‚