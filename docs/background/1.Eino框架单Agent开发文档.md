- ææ‡‚Eino Agentçš„æ ¸å¿ƒæ¦‚å¿µï¼ˆå¤§ç™½è¯+ä»£ç å¯¹åº”ï¼‰
    
- æŒæ¡å•Agentåˆ›å»ºçš„å®Œæ•´æ­¥éª¤ï¼ˆé‡ç‚¹æ˜¯é¡¹ç›®ä¸­å¸¸ç”¨çš„ChatModelAgentï¼‰
    
- æ‹†è§£ä½ é¡¹ç›®ä¸­Agentçš„å®ç°é€»è¾‘ï¼ˆç†è®ºå¯¹æ¥å®æˆ˜ä»£ç ï¼‰
    
- ä»é›¶å†™å‡ºå¯è¿è¡Œçš„Einoå•Agentï¼ˆå¤åˆ¶ä»£ç å°±èƒ½æµ‹ï¼‰
    

## 1. æ ¸å¿ƒæ¦‚å¿µé€šä¿—è®²ï¼ˆå…ˆæ‡‚åŸç†å†å†™ä»£ç ï¼‰

Einoä¸­çš„ã€ŒAgentã€æœ¬è´¨æ˜¯ã€Œæœ‰ç‰¹å®šåŠŸèƒ½çš„æ™ºèƒ½æ¨¡å—ã€ï¼Œèƒ½æ¥æ”¶è¾“å…¥ã€æ‰§è¡Œé€»è¾‘ã€è¿”å›ç»“æœï¼Œè¿˜èƒ½è°ƒç”¨å·¥å…·æˆ–å’Œå…¶ä»–Agentåä½œã€‚å…ˆææ‡‚è¿™å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œåé¢çœ‹ä»£ç ä¸æ‡µï¼š

### 1.1 Agentæ¥å£ï¼šAgentçš„ã€Œèº«ä»½è¯ã€

Einoç”¨æ¥å£å®šä¹‰Agentçš„æ ‡å‡†ï¼Œä»»ä½•ç»“æ„ä½“åªè¦å®ç°äº†è¿™3ä¸ªæ–¹æ³•ï¼Œå°±æ˜¯ä¸€ä¸ªåˆæ³•Agentï¼ˆä¸ç”¨çº ç»“åº•å±‚ï¼Œè®°ä½è¿™3ä¸ªæ–¹æ³•çš„ä½œç”¨ï¼‰ï¼š

```Go
type Agent interface {
    Name(ctx context.Context) string          // è¿”å›Agentåç§°ï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰
    Description(ctx context.Context) string   // è¿”å›AgentåŠŸèƒ½æè¿°ï¼ˆè®©å…¶ä»–AgentçŸ¥é“å®ƒèƒ½å¹²å˜›ï¼‰
    Run(ctx context.Context, input *AgentInput, opts ...AgentRunOption) *AsyncIterator[*AgentEvent] // æ ¸å¿ƒæ‰§è¡Œæ–¹æ³•
}
```

### 1.2 å…³é”®æ•°æ®ç»“æ„ï¼šAgentçš„ã€Œè¾“å…¥/è¾“å‡º/é…ç½®ã€

#### ï¼ˆ1ï¼‰AgentInputï¼šAgentçš„ã€Œè¾“å…¥ã€

Agentæ¥æ”¶çš„æ‰€æœ‰ä¿¡æ¯éƒ½åœ¨è¿™ï¼Œæ ¸å¿ƒæ˜¯`Messages`ï¼ˆå¯¹è¯æ¶ˆæ¯åˆ—è¡¨ï¼‰ï¼ŒåŒ…å«ç”¨æˆ·æŒ‡ä»¤ã€å†å²å¯¹è¯ã€å·¥å…·è°ƒç”¨ç»“æœç­‰ï¼š

```Go
type AgentInput struct {
    Messages        []adk.Message  // æ¶ˆæ¯åˆ—è¡¨ï¼ˆç”¨æˆ·æ¶ˆæ¯ã€åŠ©æ‰‹æ¶ˆæ¯ã€å·¥å…·æ¶ˆæ¯ç­‰ï¼‰
    EnableStreaming bool           // æ˜¯å¦å¯ç”¨æµå¼è¾“å‡ºï¼ˆé»˜è®¤falseï¼Œä¸€æ¬¡æ€§è¿”å›ç»“æœï¼‰
}
```

  

ç¤ºä¾‹ï¼šæ„å»ºä¸€ä¸ªç”¨æˆ·æŸ¥è¯¢å¤©æ°”çš„è¾“å…¥ï¼š

```Go
input := &adk.AgentInput{
    Messages: []adk.Message{
        schema.UserMessage("æŸ¥è¯¢æ·±åœ³æ˜å¤©çš„å¤©æ°”"), // ç”¨æˆ·æ¶ˆæ¯
    },
}
```

  

#### ï¼ˆ2ï¼‰AgentEventï¼šAgentçš„ã€Œè¾“å‡ºäº‹ä»¶ã€

Agentè¿è¡Œæ—¶äº§ç”Ÿçš„æ‰€æœ‰ç»“æœéƒ½å°è£…åœ¨`AgentEvent`é‡Œï¼Œè°ƒç”¨è€…é€šè¿‡è¿­ä»£å™¨é€ä¸ªè·å–ï¼š

```Go
type AgentEvent struct {
    AgentName string        // äº§ç”Ÿäº‹ä»¶çš„Agentåç§°
    Output    *AgentOutput  // æ­£å¸¸è¾“å‡ºç»“æœï¼ˆæ¶ˆæ¯ã€å·¥å…·è°ƒç”¨ç­‰ï¼‰
    Action    *AgentAction  // æ§åˆ¶è¡Œä¸ºï¼ˆå¦‚é€€å‡ºã€è·³è½¬å…¶ä»–Agentï¼‰
    Err       error         // é”™è¯¯ä¿¡æ¯ï¼ˆè¿è¡Œå¤±è´¥æ—¶éç©ºï¼‰
}
```

  

ç®€å•è¯´ï¼š`Output`æ˜¯æ­£å¸¸ç»“æœï¼Œ`Err`æ˜¯é”™è¯¯ï¼Œ`Action`æ˜¯æ§åˆ¶æŒ‡ä»¤ã€‚

  

#### ï¼ˆ3ï¼‰ChatModelAgentConfigï¼šChatModelAgentçš„ã€Œé…ç½®æ–‡ä»¶ã€

é¡¹ç›®ä¸­åˆ›å»ºAgentä¸»è¦ç”¨`ChatModelAgent`ï¼ˆå°è£…äº†LLMï¼Œæ”¯æŒå·¥å…·è°ƒç”¨å’ŒReActèŒƒå¼ï¼‰ï¼Œå®ƒçš„é…ç½®é¡¹å†³å®šäº†Agentçš„åŠŸèƒ½ï¼š

```Go
type ChatModelAgentConfig struct {
    Name           string                // Agentåç§°ï¼ˆå”¯ä¸€ï¼‰
    Description    string                // AgentåŠŸèƒ½æè¿°
    Instruction    string                // ç³»ç»Ÿæç¤ºè¯ï¼ˆå‘Šè¯‰Agentæ€ä¹ˆå·¥ä½œï¼‰
    Model          model.ToolCallingChatModel // ç»‘å®šçš„LLMæ¨¡å‹ï¼ˆå¦‚OpenAIã€æœ¬åœ°æ¨¡å‹ï¼‰
    ToolsConfig    ToolsConfig           // ç»‘å®šçš„å·¥å…·ï¼ˆä¹‹å‰å­¦çš„Einoå·¥å…·ï¼‰
    MaxIterations  int                   // æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼ˆé˜²æ­¢æ— é™å¾ªç¯ï¼Œé»˜è®¤20ï¼‰
}
```

  

### 1.3 æ ¸å¿ƒæµç¨‹ï¼šå•Agentæ€ä¹ˆå·¥ä½œï¼Ÿ

1. è°ƒç”¨Agentçš„`Run`æ–¹æ³•ï¼Œä¼ å…¥`AgentInput`ï¼ˆç”¨æˆ·éœ€æ±‚ï¼‰
    
2. Agentå†…éƒ¨é€šè¿‡LLMè§£æéœ€æ±‚ï¼Œæ‰§è¡Œæ ¸å¿ƒé€»è¾‘ï¼ˆæˆ–è°ƒç”¨å·¥å…·ï¼‰
    
3. äº§ç”Ÿ`AgentEvent`ï¼ˆç»“æœ/é”™è¯¯/æ§åˆ¶æŒ‡ä»¤ï¼‰ï¼Œé€šè¿‡è¿­ä»£å™¨è¿”å›
    
4. è°ƒç”¨è€…å¾ªç¯è¯»å–è¿­ä»£å™¨ï¼Œå¤„ç†æ¯ä¸ª`AgentEvent`
    

---

  

## 2. å•Agentåˆ›å»ºæ ¸å¿ƒï¼šChatModelAgentï¼ˆé¡¹ç›®ä¸­æœ€å¸¸ç”¨ï¼‰

Einoæä¾›äº†å¤šç§Agentå®ç°ï¼Œ**ChatModelAgentæ˜¯é¡¹ç›®çš„æ ¸å¿ƒ**â€”â€”å®ƒå°è£…äº†LLMäº¤äº’é€»è¾‘ï¼Œæ”¯æŒå·¥å…·è°ƒç”¨ï¼Œå®ç°äº†ReActèŒƒå¼ï¼ˆæ€è€ƒâ†’è°ƒç”¨å·¥å…·â†’å¤„ç†ç»“æœï¼‰ï¼Œä½ é¡¹ç›®ä¸­çš„æ‰€æœ‰Agentï¼ˆç®€å†åˆ†æã€é—®é¢˜ç”Ÿæˆç­‰ï¼‰éƒ½åŸºäºå®ƒå®ç°ã€‚

  

### 2.1 ChatModelAgentçš„æ ¸å¿ƒä¼˜åŠ¿

- ä¸ç”¨è‡ªå·±å®ç°`Agent`æ¥å£çš„3ä¸ªæ–¹æ³•ï¼ˆæ¡†æ¶å·²å®ç°ï¼‰
    
- åªéœ€é…ç½®`ChatModelAgentConfig`ï¼Œå°±èƒ½å¿«é€Ÿåˆ›å»ºåŠŸèƒ½Agent
    
- å¤©ç„¶æ”¯æŒå·¥å…·è°ƒç”¨ï¼ˆå’Œä¹‹å‰å­¦çš„Einoå·¥å…·æ— ç¼é›†æˆï¼‰
    
- æ”¯æŒç³»ç»Ÿæç¤ºè¯ï¼ˆ`Instruction`ï¼‰å®šä¹‰Agentè¡Œä¸º
    

### 2.2 å…³é”®é…ç½®é¡¹è¯¦è§£

|   |   |   |
|---|---|---|
|é…ç½®é¡¹|ä½œç”¨|ç¤ºä¾‹|
|Name|Agentå”¯ä¸€åç§°ï¼ˆå¤šAgentåä½œæ—¶ç”¨ï¼Œä¸èƒ½é‡å¤ï¼‰|"ResumAnalysisAgent"ï¼ˆç®€å†åˆ†æAgentï¼‰|
|Description|AgentåŠŸèƒ½æè¿°ï¼ˆè®©å…¶ä»–AgentçŸ¥é“å®ƒèƒ½å¹²å˜›ï¼Œå•Agentå¯ç®€åŒ–ï¼‰|"è§£æPDFç®€å†ï¼Œç”Ÿæˆç»“æ„åŒ–åˆ†ææŠ¥å‘Šå’Œè¯„åˆ†"|
|Instruction|ç³»ç»Ÿæç¤ºè¯ï¼ˆæ ¸å¿ƒï¼å‘Šè¯‰Agentè¯¥æ€ä¹ˆå·¥ä½œï¼Œç›¸å½“äºç»™Agentå®šã€Œè§’è‰²å’Œè§„åˆ™ã€ï¼‰|"ä½ æ˜¯èµ„æ·±ç®€å†åˆ†æå¸ˆï¼Œå…ˆè°ƒç”¨pdf_to_textå·¥å…·æå–æ–‡æœ¬ï¼Œå†ä»4ä¸ªç»´åº¦è¯„åˆ†"|
|Model|ç»‘å®šçš„LLMæ¨¡å‹ï¼ˆå¦‚OpenAIã€æœ¬åœ°æ¨¡å‹ï¼Œé¡¹ç›®ä¸­ç”¨`chat.CreatOpenAiChatModel`åˆ›å»ºï¼‰|chat.CreatOpenAiChatModel(ctx)ï¼ˆé¡¹ç›®ä¸­å°è£…çš„OpenAIæ¨¡å‹ï¼‰|
|ToolsConfig|ç»‘å®šçš„å·¥å…·ï¼ˆä¹‹å‰å­¦çš„Einoå·¥å…·ï¼Œå¦‚PDFè§£æã€è¯„åˆ†å·¥å…·ï¼‰|é…ç½®`ToolsNodeConfig`ï¼Œæ”¾å…¥éœ€è¦çš„å·¥å…·åˆ—è¡¨|
|MaxIterations|æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼ˆé˜²æ­¢Agentæ— é™å¾ªç¯è°ƒç”¨å·¥å…·ï¼Œé»˜è®¤20ï¼Œé¡¹ç›®ä¸­è®¾ä¸º10ï¼‰|10|

  

---

  

## 3. å•Agentå®ç°å®Œæ•´æ­¥éª¤ï¼ˆä»0åˆ°1ç¼–å†™ï¼‰

ä»¥ã€Œå¤©æ°”æŸ¥è¯¢Agentã€ä¸ºä¾‹ï¼Œå®Œæ•´æ¼”ç¤ºå•Agentçš„åˆ›å»ºã€é…ç½®ã€è¿è¡Œæµç¨‹ï¼Œä»£ç å¯ç›´æ¥å¤åˆ¶è¿è¡Œã€‚

  

### 3.1 æ­¥éª¤1ï¼šç¯å¢ƒå‡†å¤‡ï¼ˆå·²é…ç½®å¯è·³è¿‡ï¼‰

5. ç¡®ä¿Goç‰ˆæœ¬â‰¥1.18ï¼ˆEinoè¦æ±‚ï¼‰
    
6. é¡¹ç›®å·²åˆå§‹åŒ–Goæ¨¡å—ï¼š`go mod init your-project-name`
    
7. å®‰è£…ä¾èµ–ï¼ˆEinoæ ¸å¿ƒ+OpenAIæ¨¡å‹æ‰©å±•ï¼‰ï¼š
    

```Bash
go get github.com/cloudwego/eino/adk
go get github.com/cloudwego/eino/components/model
go get github.com/cloudwego/eino-ext/components/model/openai
go get github.com/cloudwego/eino/components/tool
go get github.com/cloudwego/eino/compose
```

  

### 3.2 æ­¥éª¤2ï¼šç¼–å†™Agentä»£ç ï¼ˆå®Œæ•´å¯è¿è¡Œï¼‰

æ–°å»ºæ–‡ä»¶`agent/weather_agent.go`ï¼Œå®ç°ä¸€ä¸ªèƒ½è°ƒç”¨ã€Œå¤©æ°”å·¥å…·ã€çš„Agentï¼š

  

```Go
package agent

import (
    "context"
    "log"
    "os"

    "github.com/cloudwego/eino/adk"
    "github.com/cloudwego/eino/components/model"
    "github.com/cloudwego/eino/components/tool"
    "github.com/cloudwego/eino/compose"
    "github.com/cloudwego/eino-ext/components/model/openai"
    // å¯¼å…¥ä¹‹å‰å†™çš„å¤©æ°”å·¥å…·ï¼ˆæˆ–ç›´æ¥åœ¨è¿™å®šä¹‰ï¼‰
)

// --------------------------
// ç¬¬ä¸€æ­¥ï¼šå®šä¹‰å¤©æ°”å·¥å…·ï¼ˆå¤ç”¨ä¹‹å‰å­¦çš„Einoå·¥å…·å¼€å‘æ¨¡æ¿ï¼‰
// --------------------------
// å¤©æ°”å·¥å…·å…¥å‚
type WeatherToolInput struct {
    City string `json:"city" jsonschema:"required,description=åŸå¸‚åç§°ï¼ˆå¦‚ï¼šæ·±åœ³ï¼‰"`
    Date string `json:"date" jsonschema:"required,description=æŸ¥è¯¢æ—¥æœŸï¼ˆå¦‚ï¼štomorrow/2024-10-01ï¼‰"`
}

// å¤©æ°”å·¥å…·å‡ºå‚
type WeatherToolOutput struct {
    Temperature string `json:"temperature" description="æ°”æ¸©"`
    Weather     string `json:"weather" description="å¤©æ°”çŠ¶å†µï¼ˆæ™´/é›¨/å¤šäº‘ï¼‰"`
    Msg         string `json:"msg" description="æ‰§è¡ŒçŠ¶æ€"`
}

// å¤©æ°”å·¥å…·æ ¸å¿ƒé€»è¾‘ï¼ˆæ¨¡æ‹Ÿè¿”å›å¤©æ°”æ•°æ®ï¼‰
func WeatherToolFunc(ctx context.Context, input *WeatherToolInput) (*WeatherToolOutput, error) {
    log.Printf("æŸ¥è¯¢å¤©æ°”ï¼šåŸå¸‚=%sï¼Œæ—¥æœŸ=%s", input.City, input.Date)
    // å®é™…é¡¹ç›®ä¸­å¯è°ƒç”¨ç¬¬ä¸‰æ–¹å¤©æ°”APIï¼Œè¿™é‡Œæ¨¡æ‹Ÿè¿”å›
    return &WeatherToolOutput{
        Temperature: "25Â°C-32Â°C",
        Weather:     "æ™´",
        Msg:         "æŸ¥è¯¢æˆåŠŸ",
    }, nil
}

// åˆ›å»ºå¤©æ°”å·¥å…·
func CreateWeatherTool() tool.InvokableTool {
    weatherTool, err := tool.Utils.InferTool(
        "get_weather", // å·¥å…·æ ‡è¯†ï¼ˆAIè°ƒç”¨æ—¶ç”¨ï¼‰
        "æŸ¥è¯¢æŒ‡å®šåŸå¸‚æŒ‡å®šæ—¥æœŸçš„å¤©æ°”ï¼Œè¿”å›æ°”æ¸©å’Œå¤©æ°”çŠ¶å†µ", // å·¥å…·æè¿°
        WeatherToolFunc, // æ ¸å¿ƒé€»è¾‘
    )
    if err != nil {
        log.Fatalf("åˆ›å»ºå¤©æ°”å·¥å…·å¤±è´¥ï¼š%v", err)
    }
    return weatherTool
}

// --------------------------
// ç¬¬äºŒæ­¥ï¼šåˆ›å»ºChatModelAgentï¼ˆæ ¸å¿ƒï¼‰
// --------------------------
func NewWeatherAgent() adk.Agent {
    ctx := context.Background()

    // 1. åˆ›å»ºLLMæ¨¡å‹ï¼ˆè¿™é‡Œç”¨OpenAIï¼Œéœ€è®¾ç½®ç¯å¢ƒå˜é‡OPENAI_API_KEYï¼‰
    llmModel, err := createOpenAiModel(ctx)
    if err != nil {
        log.Fatalf("åˆ›å»ºLLMæ¨¡å‹å¤±è´¥ï¼š%v", err)
    }

    // 2. åˆ›å»ºå·¥å…·ï¼ˆç»‘å®šåˆ°Agentï¼‰
    weatherTool := CreateWeatherTool()

    // 3. é…ç½®ChatModelAgent
    agentConfig := &adk.ChatModelAgentConfig{
        Name:        "WeatherAgent", // Agentåç§°ï¼ˆå”¯ä¸€ï¼‰
        Description: "æŸ¥è¯¢æŒ‡å®šåŸå¸‚æŒ‡å®šæ—¥æœŸçš„å¤©æ°”ï¼Œè¿”å›è¯¦ç»†æ°”æ¸©å’Œå¤©æ°”çŠ¶å†µ", // åŠŸèƒ½æè¿°
        // ç³»ç»Ÿæç¤ºè¯ï¼ˆæ ¸å¿ƒï¼å‘Šè¯‰Agentæ€ä¹ˆå·¥ä½œï¼‰
        Instruction: `ä½ æ˜¯ä¸“ä¸šçš„å¤©æ°”æŸ¥è¯¢åŠ©æ‰‹ï¼Œè´Ÿè´£å¸®ç”¨æˆ·æŸ¥è¯¢å¤©æ°”ï¼š
1. å½“ç”¨æˆ·è¯¢é—®å¤©æ°”æ—¶ï¼Œå¿…é¡»å…ˆè°ƒç”¨"get_weather"å·¥å…·ï¼Œä¼ å…¥åŸå¸‚å’Œæ—¥æœŸå‚æ•°ï¼›
2. å·¥å…·è¿”å›ç»“æœåï¼Œç›´æ¥æ•´ç†æˆè‡ªç„¶è¯­è¨€å‘ŠçŸ¥ç”¨æˆ·ï¼Œä¸ç”¨é¢å¤–æ·»åŠ æ— å…³ä¿¡æ¯ï¼›
3. å¦‚æœç”¨æˆ·æ²¡è¯´æ—¥æœŸï¼Œé»˜è®¤æŸ¥è¯¢"tomorrow"ï¼ˆæ˜å¤©ï¼‰ï¼›å¦‚æœæ²¡è¯´åŸå¸‚ï¼Œæç¤ºç”¨æˆ·è¡¥å……ã€‚`,
        Model: llmModel, // ç»‘å®šLLMæ¨¡å‹
        // ç»‘å®šå·¥å…·ï¼ˆToolsNodeConfigåŒ…è£…å·¥å…·åˆ—è¡¨ï¼‰
        ToolsConfig: adk.ToolsConfig{
            ToolsNodeConfig: compose.ToolsNodeConfig{
                Tools: []tool.BaseTool{weatherTool}, // æ”¾å…¥å¤©æ°”å·¥å…·
            },
        },
        MaxIterations: 5, // æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼ˆé˜²æ­¢æ— é™å¾ªç¯ï¼‰
    }

    // 4. åˆ›å»ºChatModelAgentï¼ˆæ¡†æ¶æä¾›çš„æ–¹æ³•ï¼Œç›´æ¥è°ƒç”¨ï¼‰
    weatherAgent, err := adk.NewChatModelAgent(ctx, agentConfig)
    if err != nil {
        log.Fatalf("åˆ›å»ºå¤©æ°”Agentå¤±è´¥ï¼š%v", err)
    }

    return weatherAgent
}

// --------------------------
// è¾…åŠ©å‡½æ•°ï¼šåˆ›å»ºOpenAIæ¨¡å‹ï¼ˆé¡¹ç›®ä¸­é€šå¸¸å°è£…åœ¨chatç›®å½•ï¼‰
// --------------------------
func createOpenAiModel(ctx context.Context) (model.ToolCallingChatModel, error) {
    apiKey := os.Getenv("OPENAI_API_KEY") // ä»ç¯å¢ƒå˜é‡è·å–APIKey
    if apiKey == "" {
        log.Fatal("è¯·è®¾ç½®ç¯å¢ƒå˜é‡OPENAI_API_KEY")
    }
    // åˆ›å»ºOpenAIæ¨¡å‹é…ç½®
    modelConfig := &openai.ChatModelConfig{
        APIKey: apiKey,
        Model:  "gpt-3.5-turbo", // æ¨¡å‹åç§°
    }
    // è°ƒç”¨Einoæ‰©å±•åˆ›å»ºæ¨¡å‹
    return openai.NewChatModel(ctx, modelConfig)
}
```

  

### 3.3 æ­¥éª¤3ï¼šè¿è¡ŒAgentï¼ˆç¼–å†™ä¸»å‡½æ•°ï¼‰

æ–°å»º`main.go`ï¼Œè°ƒç”¨Agentå¹¶å¤„ç†è¾“å‡ºï¼š

```Go
package main

import (
    "context"
    "log"
    "your-project-name/agent" // æ›¿æ¢æˆä½ çš„é¡¹ç›®æ¨¡å—å
)

func main() {
    ctx := context.Background()

    // 1. åˆ›å»ºå¤©æ°”Agent
    weatherAgent := agent.NewWeatherAgent()
    log.Printf("âœ… Agentåˆ›å»ºæˆåŠŸï¼šåç§°=%sï¼Œæè¿°=%s",
        weatherAgent.Name(ctx),
        weatherAgent.Description(ctx),
    )

    // 2. æ„å»ºè¾“å…¥ï¼ˆç”¨æˆ·æŸ¥è¯¢ï¼‰
    agentInput := &adk.AgentInput{
        Messages: []adk.Message{
            schema.UserMessage("æŸ¥è¯¢å¹¿å·åå¤©çš„å¤©æ°”"), // ç”¨æˆ·æ¶ˆæ¯
        },
    }

    // 3. è¿è¡ŒAgentï¼ˆè¿”å›è¿­ä»£å™¨ï¼Œç”¨äºæ¥æ”¶äº‹ä»¶ï¼‰
    eventIter := weatherAgent.Run(ctx, agentInput)

    // 4. å¾ªç¯å¤„ç†AgentEventï¼ˆæ ¸å¿ƒï¼è¯»å–æ‰€æœ‰è¾“å‡ºäº‹ä»¶ï¼‰
    for {
        event, ok := eventIter.Next()
        if !ok {
            log.Println("ğŸ”š Agentè¿è¡Œç»“æŸ")
            break // è¿­ä»£å™¨å…³é—­ï¼Œè¿è¡Œç»“æŸ
        }

        // å¤„ç†é”™è¯¯
        if event.Err != nil {
            log.Fatalf("âŒ Agentè¿è¡Œå‡ºé”™ï¼š%v", event.Err)
        }

        // å¤„ç†è¾“å‡ºç»“æœï¼ˆMessageOutputï¼‰
        if event.Output != nil && event.Output.MessageOutput != nil {
            msgOutput := event.Output.MessageOutput
            // åŒºåˆ†æ¶ˆæ¯ç±»å‹ï¼šåŠ©æ‰‹æ¶ˆæ¯ï¼ˆAgentå›å¤ï¼‰ã€å·¥å…·æ¶ˆæ¯ï¼ˆå·¥å…·è°ƒç”¨ç»“æœï¼‰
            switch msgOutput.Role {
            case schema.Assistant:
                log.Printf("\nğŸ“¢ Agent[%s] å›å¤ï¼š%s", event.AgentName, msgOutput.Message.Content)
            case schema.Tool:
                log.Printf("\nğŸ› ï¸  å·¥å…·[%s] ç»“æœï¼š%s", msgOutput.ToolName, msgOutput.Message.Content)
            }
        }
    }
}
```

  

### 3.4 æ­¥éª¤4ï¼šæµ‹è¯•è¿è¡Œ

8. è®¾ç½®OpenAI APIKeyç¯å¢ƒå˜é‡ï¼ˆç»ˆç«¯æ‰§è¡Œï¼‰ï¼š
    
    1. Windowsï¼š`set OPENAI_API_KEY=ä½ çš„APIKey`
        
    2. Mac/Linuxï¼š`export OPENAI_API_KEY=ä½ çš„APIKey`
        
9. è¿è¡Œä»£ç ï¼š`go run main.go`
    
10. é¢„æœŸè¾“å‡ºï¼š
    

```Plain
âœ… Agentåˆ›å»ºæˆåŠŸï¼šåç§°=WeatherAgentï¼Œæè¿°=æŸ¥è¯¢æŒ‡å®šåŸå¸‚æŒ‡å®šæ—¥æœŸçš„å¤©æ°”...
ğŸ“¢ Agent[WeatherAgent] å›å¤ï¼š{"tool_calls":[{"function":{"name":"get_weather","arguments":{"city":"å¹¿å·","date":"åå¤©"}}]}
ğŸ› ï¸  å·¥å…·[get_weather] ç»“æœï¼š{"temperature":"25Â°C-32Â°C","weather":"æ™´","msg":"æŸ¥è¯¢æˆåŠŸ"}
ğŸ“¢ Agent[WeatherAgent] å›å¤ï¼šå¹¿å·åå¤©çš„å¤©æ°”ä¸ºæ™´ï¼Œæ°”æ¸©25Â°C-32Â°Cã€‚
ğŸ”š Agentè¿è¡Œç»“æŸ
```

  

---

  

## 4. æ‹†è§£ä½ é¡¹ç›®ä¸­çš„Agentå®ç°ï¼ˆç†è®ºå¯¹æ¥å®æˆ˜ï¼‰

ç°åœ¨å›åˆ°ä½ çš„é¡¹ç›®ï¼Œä»¥æ ¸å¿ƒçš„`ResumAnalysisAgent`ï¼ˆç®€å†åˆ†æAgentï¼‰ä¸ºä¾‹ï¼Œé€è¡Œè§£æä»£ç ï¼Œçœ‹çœ‹å®ƒå¦‚ä½•å¯¹åº”å‰é¢è®²çš„ç†è®ºï¼š

  

### 4.1 é¡¹ç›®ä¸­Agentä»£ç ï¼ˆ`agent/resumAgent.go`ï¼‰

```Go
package agent

import (
    "context"
    "fmt"
    "log"

    "github.com/cloudwego/eino/adk"
    "your-project-name/chat"   // é¡¹ç›®ä¸­å°è£…çš„LLMæ¨¡å‹
    "your-project-name/tool2"  // é¡¹ç›®ä¸­çš„å·¥å…·åŒ…
)

func NewResumAnalysisAgent() adk.Agent {
    ctx := context.Background()

    // åˆ›å»ºChatModelAgent
    a, err := adk.NewChatModelAgent(ctx, &adk.ChatModelAgentConfig{
        Name:        "ResumAnalysisAgent", // Agentåç§°ï¼ˆå”¯ä¸€ï¼‰
        Description: "ä¸€ä¸ªå¯ä»¥è§£æç®€å†pdfåˆ†æç®€å†çš„æ™ºèƒ½ä½“", // åŠŸèƒ½æè¿°
        // ç³»ç»Ÿæç¤ºè¯ï¼ˆæ ¸å¿ƒï¼å®šä¹‰Agentè¡Œä¸ºï¼‰
        Instruction: `ä½ æ˜¯ä¸€åèµ„æ·±çš„ç®€å†åˆ†æä¸“å®¶ï¼Œè´Ÿè´£å¯¹ç”¨æˆ·çš„ç®€å†è¿›è¡Œåˆ†æ,å¹¶è¾“å‡ºå¯¹åº”çš„åˆ†æç»“æœã€‚
å·¥ä½œæµç¨‹ï¼š
1. å½“ç”¨æˆ·æä¾›ç®€å†æˆ–ç›¸å…³èƒŒæ™¯ä¿¡æ¯æ—¶ï¼Œå…ˆä½¿ç”¨ "pdf_to_text" å·¥å…·æå–æ–‡æœ¬ï¼ˆå¦‚éœ€è¦ï¼‰ï¼Œè¿›è¡Œç»“æ„åŒ–è¯„ä¼°ã€‚
2. ä»æ¨¡å—å®Œæ•´åº¦ã€æŠ€èƒ½åŒ¹é…åº¦ã€é‡åŒ–æˆæœã€è¯­è¨€è¡¨è¾¾ç­‰è§’åº¦ç»™å‡ºè¯¦ç»†åé¦ˆï¼Œå¹¶æä¾›å¯æ‰§è¡Œçš„æ”¹è¿›å»ºè®®ï¼›å¹¶è¿›è¡Œç®€å†è¯„åˆ†ï¼ˆ0-100åˆ†ï¼‰ã€‚`,
        Model: chat.CreatOpenAiChatModel(ctx), // ç»‘å®šLLMæ¨¡å‹ï¼ˆé¡¹ç›®å°è£…ï¼‰
        // ç»‘å®šå·¥å…·ï¼ˆPDFè§£æå·¥å…·ï¼‰
        ToolsConfig: adk.ToolsConfig{
            ToolsNodeConfig: compose.ToolsNodeConfig{
                Tools: []tool.BaseTool{tool2.CreatePDFToTextTool()},
            },
        },
        MaxIterations: 10, // æœ€å¤§è¿­ä»£æ¬¡æ•°
    })
    if err != nil {
        log.Fatal(fmt.Errorf("failed to create chatmodel: %w", err))
    }

    return a
}
```

  

### 4.2 é€è¡Œè§£æï¼ˆå¯¹åº”ç†è®ºï¼‰

11. **Agentåç§°ä¸æè¿°**ï¼š
    
    1. `Name: "ResumAnalysisAgent"`ï¼šå”¯ä¸€æ ‡è¯†ï¼Œå¤šAgentåä½œæ—¶ç”¨
        
    2. `Description: "è§£æç®€å†pdfåˆ†æç®€å†çš„æ™ºèƒ½ä½“"`ï¼šç®€å•è¯´æ˜åŠŸèƒ½
        
12. **æ ¸å¿ƒé…ç½®ï¼šInstruction**ï¼š
    
    1. å®šä¹‰äº†Agentçš„ã€Œè§’è‰²ã€ï¼ˆèµ„æ·±ç®€å†åˆ†æä¸“å®¶ï¼‰å’Œã€Œå·¥ä½œæµç¨‹ã€ï¼ˆå…ˆè°ƒç”¨å·¥å…·â†’å†åˆ†æè¯„åˆ†ï¼‰
        
    2. æ˜ç¡®å‘Šè¯‰Agentã€Œä»€ä¹ˆæ—¶å€™è°ƒç”¨å·¥å…·ã€ï¼ˆç”¨æˆ·æä¾›ç®€å†æ—¶ï¼‰å’Œã€Œè°ƒç”¨ä»€ä¹ˆå·¥å…·ã€ï¼ˆpdf_to_textï¼‰
        
13. **ç»‘å®šLLMæ¨¡å‹**ï¼š
    
    1. `Model: chat.CreatOpenAiChatModel(ctx)`ï¼šé¡¹ç›®ä¸­å°è£…çš„OpenAIæ¨¡å‹ï¼Œå’Œå‰é¢ç¤ºä¾‹çš„`createOpenAiModel`åŠŸèƒ½ä¸€è‡´
        
14. **ç»‘å®šå·¥å…·**ï¼š
    
    1. é€šè¿‡`ToolsConfig.ToolsNodeConfig`ç»‘å®š`PDFToTextTool`ï¼ˆä¹‹å‰å­¦çš„Einoå·¥å…·ï¼‰
        
    2. è¿™é‡Œåªç»‘å®šäº†ä¸€ä¸ªå·¥å…·ï¼Œå®é™…å¯æ·»åŠ å¤šä¸ªï¼ˆå¦‚ç®€å†è¯„åˆ†å·¥å…·ï¼‰
        
15. **åˆ›å»ºAgent**ï¼š
    
    1. è°ƒç”¨`adk.NewChatModelAgent`ï¼šæ¡†æ¶æä¾›çš„å·¥å‚æ–¹æ³•ï¼Œè‡ªåŠ¨å®ç°`Agent`æ¥å£çš„3ä¸ªæ–¹æ³•
        
    2. é”™è¯¯å¤„ç†ï¼šåˆ›å»ºå¤±è´¥ç›´æ¥é€€å‡ºï¼ˆç”Ÿäº§ç¯å¢ƒå¯ä¼˜åŒ–ä¸ºè¿”å›é”™è¯¯ï¼‰
        

### 4.3 é¡¹ç›®ä¸­Agentçš„è¿è¡Œæµç¨‹ï¼ˆå’Œç¤ºä¾‹ä¸€è‡´ï¼‰

16. ä¸»ç¨‹åºåˆ›å»º`ResumAnalysisAgent`å®ä¾‹ï¼ˆ`NewResumAnalysisAgent`ï¼‰
    
17. ä¼ å…¥ç”¨æˆ·è¾“å…¥ï¼ˆå¦‚PDFç®€å†è·¯å¾„ï¼‰
    
18. Agenté€šè¿‡LLMè§£æéœ€æ±‚ï¼Œè°ƒç”¨`pdf_to_text`å·¥å…·æå–æ–‡æœ¬
    
19. å·¥å…·è¿”å›æ–‡æœ¬åï¼ŒAgentè¿›è¡Œåˆ†æã€è¯„åˆ†ï¼Œç”ŸæˆæŠ¥å‘Š
    
20. ä¸»ç¨‹åºé€šè¿‡è¿­ä»£å™¨æ¥æ”¶`AgentEvent`ï¼Œè¾“å‡ºç»“æœ
    

---

  

## 5. ä»é›¶å®ç°è‡ªå·±çš„Agentï¼ˆå®æ“æ¼”ç»ƒï¼‰

è·Ÿç€åšï¼Œä½ ä¼šåˆ›å»ºä¸€ä¸ªã€Œé¢è¯•é—®é¢˜ç”ŸæˆAgentã€ï¼Œå¹¶é›†æˆåˆ°é¡¹ç›®ä¸­ï¼š

  

### 5.1 æ­¥éª¤1ï¼šåˆ›å»ºAgentæ–‡ä»¶`agent/question_generator_agent.go`

```Go
package agent

import (
    "context"
    "fmt"
    "log"

    "github.com/cloudwego/eino/adk"
    "github.com/cloudwego/eino/compose"
    "your-project-name/chat"
    "your-project-name/tool2"
)

// NewQuestionGeneratorAgentï¼šåˆ›å»ºé¢è¯•é—®é¢˜ç”ŸæˆAgent
func NewQuestionGeneratorAgent() adk.Agent {
    ctx := context.Background()

    // 1. åˆ›å»ºLLMæ¨¡å‹
    llmModel := chat.CreatOpenAiChatModel(ctx)

    // 2. åˆ›å»ºå·¥å…·ï¼ˆå‡è®¾é¡¹ç›®ä¸­å·²æœ‰é—®é¢˜ç”Ÿæˆå·¥å…·CreateQuestionGenToolï¼‰
    questionTool := tool2.CreateQuestionGenTool()

    // 3. é…ç½®Agent
    agentConfig := &adk.ChatModelAgentConfig{
        Name:        "QuestionGeneratorAgent", // å”¯ä¸€åç§°
        Description: "æ ¹æ®ç®€å†å†…å®¹å’Œç›®æ ‡å²—ä½ï¼Œç”Ÿæˆé’ˆå¯¹æ€§é¢è¯•é—®é¢˜", // åŠŸèƒ½æè¿°
        // ç³»ç»Ÿæç¤ºè¯ï¼ˆæ ¸å¿ƒè§„åˆ™ï¼‰
        Instruction: `ä½ æ˜¯èµ„æ·±æŠ€æœ¯é¢è¯•å®˜ï¼Œè´Ÿè´£æ ¹æ®ç”¨æˆ·ç®€å†å’Œç›®æ ‡å²—ä½ç”Ÿæˆé¢è¯•é—®é¢˜ï¼š
1. å…ˆè·å–ç®€å†æ–‡æœ¬ï¼ˆå¦‚æœå·²é€šè¿‡å·¥å…·æå–ï¼Œç›´æ¥ä½¿ç”¨ï¼›æœªæå–åˆ™æç¤ºç”¨æˆ·æä¾›ï¼‰ï¼›
2. è°ƒç”¨"gen_question"å·¥å…·ï¼Œä¼ å…¥ç®€å†æ–‡æœ¬å’Œç›®æ ‡å²—ä½ï¼›
3. å·¥å…·è¿”å›é—®é¢˜åï¼Œæ•´ç†æˆæ¸…æ™°çš„åˆ—è¡¨ï¼ˆåˆ†æŠ€æœ¯ã€é¡¹ç›®ã€è½¯æŠ€èƒ½3ç±»ï¼‰ï¼Œæœ€å¤š10ä¸ªé—®é¢˜ã€‚`,
        Model: llmModel,
        // ç»‘å®šå·¥å…·
        ToolsConfig: adk.ToolsConfig{
            ToolsNodeConfig: compose.ToolsNodeConfig{
                Tools: []tool.BaseTool{questionTool},
            },
        },
        MaxIterations: 8, // æœ€å¤§è¿­ä»£æ¬¡æ•°
    }

    // 4. åˆ›å»ºAgent
    agent, err := adk.NewChatModelAgent(ctx, agentConfig)
    if err != nil {
        log.Fatal(fmt.Errorf("åˆ›å»ºé—®é¢˜ç”ŸæˆAgentå¤±è´¥ï¼š%w", err))
    }

    return agent
}
```

  

### 5.2 æ­¥éª¤2ï¼šåˆ›å»ºé…å¥—å·¥å…·ï¼ˆ`tool/gen_question.go`ï¼‰

å¦‚æœæ²¡æœ‰`CreateQuestionGenTool`ï¼Œå‚è€ƒä¹‹å‰çš„å·¥å…·æ¨¡æ¿å®ç°ï¼š

```Go
package tool2

import (
    "context"
    "log"
    "github.com/cloudwego/eino/components/tool"
    "github.com/cloudwego/eino/components/tool/utils"
)

// å…¥å‚ï¼šç®€å†æ–‡æœ¬+ç›®æ ‡å²—ä½
type QuestionGenRequest struct {
    ResumeText string `json:"resume_text" jsonschema:"required,description=ç®€å†çº¯æ–‡æœ¬"`
    Position   string `json:"position" jsonschema:"required,description=ç›®æ ‡å²—ä½ï¼ˆå¦‚ï¼šåç«¯å¼€å‘ï¼‰"`
}

// å‡ºå‚ï¼šåˆ†ç±»åçš„é¢è¯•é—®é¢˜
type QuestionGenResponse struct {
    TechQuestions  []string `json:"tech_questions" description="æŠ€æœ¯é—®é¢˜"`
    ProjectQuestions []string `json:"project_questions" description="é¡¹ç›®é—®é¢˜"`
    SoftQuestions  []string `json:"soft_questions" description="è½¯æŠ€èƒ½é—®é¢˜"`
    Msg            string   `json:"msg" description="æ‰§è¡ŒçŠ¶æ€"`
}

// æ ¸å¿ƒé€»è¾‘ï¼šç”Ÿæˆé¢è¯•é—®é¢˜
func GenerateQuestion(ctx context.Context, req *QuestionGenRequest) (*QuestionGenResponse, error) {
    log.Printf("ç”Ÿæˆé¢è¯•é—®é¢˜ï¼šå²—ä½=%s", req.Position)
    // å®é™…é¡¹ç›®ä¸­å¯é€šè¿‡LLMç”Ÿæˆï¼Œè¿™é‡Œæ¨¡æ‹Ÿè¿”å›
    return &QuestionGenResponse{
        TechQuestions: []string{
            "è¯·ä»‹ç»ä½ ç†Ÿæ‚‰çš„Goè¯­è¨€å¹¶å‘æ¨¡å‹ï¼Ÿ",
            "ä½ å¦‚ä½•å¤„ç†é¡¹ç›®ä¸­çš„å†…å­˜æ³„æ¼é—®é¢˜ï¼Ÿ",
        },
        ProjectQuestions: []string{
            "è¯·è¯´æ˜ä½ ç®€å†ä¸­æåˆ°çš„XXé¡¹ç›®çš„æŠ€æœ¯éš¾ç‚¹ï¼Ÿ",
            "ä½ åœ¨é¡¹ç›®ä¸­æ‹…ä»»ä»€ä¹ˆè§’è‰²ï¼Œè´Ÿè´£å“ªäº›æ ¸å¿ƒæ¨¡å—ï¼Ÿ",
        },
        SoftQuestions: []string{
            "ä½ å¦‚ä½•ä¸è·¨éƒ¨é—¨åŒäº‹åä½œå®Œæˆä»»åŠ¡ï¼Ÿ",
            "é‡åˆ°éœ€æ±‚å˜æ›´æ—¶ï¼Œä½ ä¼šå¦‚ä½•å¤„ç†ï¼Ÿ",
        },
        Msg: "é—®é¢˜ç”ŸæˆæˆåŠŸ",
    }, nil
}

// åˆ›å»ºå·¥å…·
func CreateQuestionGenTool() tool.InvokableTool {
    tool, err := utils.InferTool(
        "gen_question",
        "æ ¹æ®ç®€å†æ–‡æœ¬å’Œç›®æ ‡å²—ä½ï¼Œç”ŸæˆæŠ€æœ¯ã€é¡¹ç›®ã€è½¯æŠ€èƒ½ä¸‰ç±»é¢è¯•é—®é¢˜",
        GenerateQuestion,
    )
    if err != nil {
        log.Fatalf("åˆ›å»ºé—®é¢˜ç”Ÿæˆå·¥å…·å¤±è´¥ï¼š%v", err)
    }
    return tool
}
```

  

### 5.3 æ­¥éª¤3ï¼šæµ‹è¯•Agent

ä¿®æ”¹`main.go`ï¼Œæ·»åŠ æµ‹è¯•ä»£ç ï¼š

```Go
func main() {
    ctx := context.Background()

    // åˆ›å»ºé—®é¢˜ç”ŸæˆAgent
    questionAgent := agent.NewQuestionGeneratorAgent()

    // æ„å»ºè¾“å…¥ï¼ˆç®€å†æ–‡æœ¬+ç›®æ ‡å²—ä½ï¼‰
    agentInput := &adk.AgentInput{
        Messages: []adk.Message{
            schema.UserMessage("æˆ‘çš„ç®€å†æ–‡æœ¬ï¼šç†Ÿæ‚‰Goè¯­è¨€ã€å¹¶å‘ç¼–ç¨‹ï¼Œå‚ä¸è¿‡ç”µå•†è®¢å•ç³»ç»Ÿå¼€å‘ã€‚ç›®æ ‡å²—ä½ï¼šåç«¯å¼€å‘"),
        },
    }

    // è¿è¡ŒAgent
    eventIter := questionAgent.Run(ctx, agentInput)

    // å¤„ç†äº‹ä»¶
    for {
        event, ok := eventIter.Next()
        if !ok {
            break
        }
        if event.Err != nil {
            log.Fatal(event.Err)
        }
        if event.Output != nil && event.Output.MessageOutput != nil {
            msgOutput := event.Output.MessageOutput
            log.Printf("\nğŸ“¢ Agent[%s]ï¼š%s", event.AgentName, msgOutput.Message.Content)
        }
    }
}
```

  

### 5.4 è¿è¡Œç»“æœ

```Plain
âœ… Agentåˆ›å»ºæˆåŠŸï¼šåç§°=QuestionGeneratorAgentï¼Œæè¿°=æ ¹æ®ç®€å†å†…å®¹å’Œç›®æ ‡å²—ä½...
ğŸ“¢ Agent[QuestionGeneratorAgent]ï¼š{"tool_calls":[{"function":{"name":"gen_question","arguments":{"resume_text":"ç†Ÿæ‚‰Goè¯­è¨€...","position":"åç«¯å¼€å‘"}}]}
ğŸ› ï¸  å·¥å…·[gen_question] ç»“æœï¼š{"tech_questions":["è¯·ä»‹ç»ä½ ç†Ÿæ‚‰çš„Goè¯­è¨€å¹¶å‘æ¨¡å‹ï¼Ÿ..."],"project_questions":[...],"soft_questions":[...],"msg":"é—®é¢˜ç”ŸæˆæˆåŠŸ"}
ğŸ“¢ Agent[QuestionGeneratorAgent]ï¼š
### é¢è¯•é—®é¢˜åˆ—è¡¨
#### ä¸€ã€æŠ€æœ¯é—®é¢˜
1. è¯·ä»‹ç»ä½ ç†Ÿæ‚‰çš„Goè¯­è¨€å¹¶å‘æ¨¡å‹ï¼Ÿ
2. ä½ å¦‚ä½•å¤„ç†é¡¹ç›®ä¸­çš„å†…å­˜æ³„æ¼é—®é¢˜ï¼Ÿ

#### äºŒã€é¡¹ç›®é—®é¢˜
1. è¯·è¯´æ˜ä½ ç®€å†ä¸­æåˆ°çš„ç”µå•†è®¢å•ç³»ç»Ÿçš„æŠ€æœ¯éš¾ç‚¹ï¼Ÿ
...
```

  

---

  

## 6. å¸¸è§é—®é¢˜ä¸æ’æŸ¥ï¼ˆå°ç™½é¿å‘ï¼‰

### 6.1 ä¾èµ–å®‰è£…å¤±è´¥

æŠ¥é”™ï¼š`cannot find module providing package github.com/cloudwego/eino/xxx`

è§£å†³ï¼š

```Bash
go mod tidy # è‡ªåŠ¨æ•´ç†ä¾èµ–
go get github.com/cloudwego/eino/adk@latest # å®‰è£…æœ€æ–°ç‰ˆEino ADK
```

  

### 6.2 Agentåˆ›å»ºå¤±è´¥ï¼šæ¨¡å‹åˆå§‹åŒ–é”™è¯¯

æŠ¥é”™ï¼š`failed to create chatmodel: ...`

åŸå› ï¼šLLMæ¨¡å‹é…ç½®é”™è¯¯ï¼ˆå¦‚APIKeyä¸ºç©ºã€æ¨¡å‹åç§°é”™è¯¯ï¼‰

æ’æŸ¥ï¼š

- ç¡®è®¤ç¯å¢ƒå˜é‡`OPENAI_API_KEY`å·²è®¾ç½®
    
- æ£€æŸ¥`chat.CreatOpenAiChatModel`ä¸­çš„æ¨¡å‹åç§°ï¼ˆå¦‚`gpt-3.5-turbo`æ˜¯å¦æ­£ç¡®ï¼‰
    
- æµ‹è¯•ç½‘ç»œæ˜¯å¦èƒ½è®¿é—®OpenAIæ¥å£ï¼ˆå›½å†…éœ€é…ç½®ä»£ç†ï¼‰
    

### 6.3 Agentä¸è°ƒç”¨å·¥å…·

åŸå› ï¼š`Instruction`ä¸­æœªæ˜ç¡®å·¥å…·è°ƒç”¨è§„åˆ™

è§£å†³ï¼šåœ¨`Instruction`ä¸­æ˜ç¡®ï¼š

- ä»€ä¹ˆæ—¶å€™è°ƒç”¨å·¥å…·ï¼ˆå¦‚â€œç”¨æˆ·æä¾›PDFè·¯å¾„æ—¶â€ï¼‰
    
- è°ƒç”¨ä»€ä¹ˆå·¥å…·ï¼ˆå¦‚â€œå¿…é¡»è°ƒç”¨pdf_to_textå·¥å…·â€ï¼‰
    
- å·¥å…·å‚æ•°æ€ä¹ˆä¼ ï¼ˆå¦‚â€œä¼ å…¥PDFçš„ç»å¯¹è·¯å¾„â€ï¼‰
    

### 6.4 è¿­ä»£å™¨æ²¡æœ‰è¾“å‡ºï¼ˆ`Next()`ä¸€ç›´é˜»å¡ï¼‰

åŸå› ï¼šAgentæœªäº§ç”Ÿ`AgentEvent`ï¼Œå¯èƒ½æ˜¯LLMæœªå“åº”æˆ–é€»è¾‘å¡ä½

æ’æŸ¥ï¼š

- æ£€æŸ¥LLM APIæ˜¯å¦æ­£å¸¸ï¼ˆå¯å•ç‹¬æµ‹è¯•æ¨¡å‹è°ƒç”¨ï¼‰
    
- å‡å°‘`MaxIterations`ï¼ˆå¦‚è®¾ä¸º5ï¼‰ï¼Œé¿å…æ— é™å¾ªç¯
    
- åœ¨`Run`æ–¹æ³•ä¸­æ·»åŠ æ—¥å¿—ï¼ŒæŸ¥çœ‹Agentæ‰§è¡Œåˆ°å“ªä¸€æ­¥
    

### 6.5 å·¥å…·è°ƒç”¨å‚æ•°é”™è¯¯

æŠ¥é”™ï¼š`json: cannot unmarshal object into Go value of type xxx`

åŸå› ï¼šAgentç”Ÿæˆçš„å·¥å…·å‚æ•°JSONå’Œå·¥å…·å…¥å‚ç»“æ„ä½“ä¸åŒ¹é…

è§£å†³ï¼š

- æ£€æŸ¥å·¥å…·å…¥å‚ç»“æ„ä½“çš„`json:"å‚æ•°å"`æ˜¯å¦å°å†™ï¼ˆå¦‚`file_path`è€Œé`FilePath`ï¼‰
    
- åœ¨`Instruction`ä¸­æ˜ç¡®å‚æ•°æ ¼å¼ï¼ˆå¦‚â€œfile_pathå‚æ•°ä¼ å…¥PDFçš„ç»å¯¹è·¯å¾„â€ï¼‰
    

## Eino å• Agent å¼€å‘é€šç”¨æ¨¡æ¿

è¿™ä»½æ¨¡æ¿åŸºäº Eino æ¡†æ¶æ ¸å¿ƒçš„ `ChatModelAgent`ï¼ˆé¡¹ç›®ä¸­æœ€å¸¸ç”¨ã€æ”¯æŒå·¥å…·è°ƒç”¨å’Œ LLM é›†æˆï¼‰æ‰“é€ ï¼Œ**æ‰€æœ‰å• Agent éƒ½èƒ½å¥—ç”¨è¿™ä¸ªç»“æ„**ã€‚åªéœ€ä¿®æ”¹ã€Œå ä½ç¬¦ã€é…ç½®é¡¹ã€å·¥å…·ç»‘å®šã€3 ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼Œå¤åˆ¶ç²˜è´´å³å¯å¿«é€Ÿå®ç°åŠŸèƒ½ Agentã€‚

  

### æ¨¡æ¿æ–‡ä»¶ç»“æ„

å»ºè®®æ–°å»ºæ–‡ä»¶å‘½åè§„èŒƒï¼š`agent/[agentåŠŸèƒ½]_agent.go`ï¼ˆå¦‚ `resume_analysis_agent.go`ã€`question_generator_agent.go`ï¼‰

  

```Go
// åŒ…åï¼šå›ºå®šä¸º agentï¼ˆæ ¹æ®é¡¹ç›®å®é™…ç›®å½•è°ƒæ•´ï¼Œé¡¹ç›®ä¸­é€šå¸¸ç»Ÿä¸€ç”¨ agent åŒ…ï¼‰
package agent

import (
        "context"
        "fmt"
        "log"
        "os"

        "github.com/cloudwego/eino/adk"
        "github.com/cloudwego/eino/components/model"
        "github.com/cloudwego/eino/components/tool"
        "github.com/cloudwego/eino/compose"
        "github.com/cloudwego/eino/schema"
        "github.com/cloudwego/eino-ext/components/model/openai"

        // å¯¼å…¥é¡¹ç›®ä¾èµ–ï¼ˆæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ï¼‰
        "your-project-name/chat"   // é¡¹ç›®ä¸­å°è£…çš„ LLM æ¨¡å‹ï¼ˆå¦‚ OpenAI é…ç½®ï¼‰
        "your-project-name/tool2"  // é¡¹ç›®ä¸­è‡ªå®šä¹‰çš„ Eino å·¥å…·ï¼ˆå¦‚éœ€ç»‘å®šå·¥å…·ï¼‰
)

// ======================================
// å¯é€‰ï¼šç»‘å®šå·¥å…·ï¼ˆä¸éœ€è¦å·¥å…·åˆ™æ³¨é‡Š/åˆ é™¤è¿™éƒ¨åˆ†ï¼‰
// è¯´æ˜ï¼šå¦‚æœ Agent éœ€è¦è°ƒç”¨å·¥å…·ï¼Œåœ¨æ­¤å®šä¹‰å·¥å…·åˆ›å»ºé€»è¾‘ï¼›æ— éœ€å·¥å…·åˆ™è·³è¿‡
// ======================================
// æ­¥éª¤1ï¼šå¯¼å…¥/å®šä¹‰éœ€è¦çš„å·¥å…·ï¼ˆç¤ºä¾‹ï¼šç»‘å®š PDF è§£æå·¥å…· + ç®€å†è¯„åˆ†å·¥å…·ï¼‰
func getAgentTools() []tool.BaseTool {
        var tools []tool.BaseTool

        // æ·»åŠ å·¥å…·1ï¼šPDF è§£æå·¥å…·ï¼ˆé¡¹ç›®ä¸­å·²å®ç°çš„å·¥å…·ï¼‰
        tools = append(tools, tool2.CreatePDFToTextTool())

        // æ·»åŠ å·¥å…·2ï¼šç®€å†è¯„åˆ†å·¥å…·ï¼ˆæ ¹æ®éœ€è¦æ·»åŠ ï¼Œä¸éœ€è¦åˆ™æ³¨é‡Šï¼‰
        // tools = append(tools, tool2.CreateResumeScoreTool())

        // å¯ç»§ç»­æ·»åŠ æ›´å¤šå·¥å…·...
        return tools
}

// ======================================
// ç¬¬ä¸€æ­¥ï¼šåˆ›å»º LLM æ¨¡å‹ï¼ˆä¸¤ç§æ–¹å¼äºŒé€‰ä¸€ï¼Œé¡¹ç›®ä¸­å¸¸ç”¨æ–¹å¼1ï¼‰
// è¯´æ˜ï¼šAgent ä¾èµ– LLM å¤„ç†é€»è¾‘ï¼Œå¿…é¡»ç»‘å®šæ¨¡å‹
// ======================================
// æ–¹å¼1ï¼šä½¿ç”¨é¡¹ç›®å°è£…çš„æ¨¡å‹ï¼ˆæ¨èï¼Œç»Ÿä¸€é…ç½®ç®¡ç†ï¼‰
func createLLMModel(ctx context.Context) model.ToolCallingChatModel {
        // é¡¹ç›®ä¸­é€šå¸¸å°è£…åœ¨ chat ç›®å½•ï¼Œç›´æ¥è°ƒç”¨å³å¯ï¼ˆå¦‚ OpenAIã€æœ¬åœ°æ¨¡å‹ï¼‰
        return chat.CreatOpenAiChatModel(ctx)
}

// æ–¹å¼2ï¼šç›´æ¥åˆ›å»º OpenAI æ¨¡å‹ï¼ˆå¤‡ç”¨ï¼Œé€‚åˆå¿«é€Ÿæµ‹è¯•ï¼‰
func createOpenAIModelDirectly(ctx context.Context) (model.ToolCallingChatModel, error) {
        // ä»ç¯å¢ƒå˜é‡è·å– API Keyï¼ˆé¿å…ç¡¬ç¼–ç ï¼‰
        apiKey := os.Getenv("OPENAI_API_KEY")
        if apiKey == "" {
                return nil, fmt.Errorf("è¯·è®¾ç½®ç¯å¢ƒå˜é‡ OPENAI_API_KEY")
        }

        // é…ç½® OpenAI æ¨¡å‹
        modelConfig := &openai.ChatModelConfig{
                APIKey: apiKey,
                Model:  "gpt-3.5-turbo", // æ¨¡å‹åç§°ï¼ˆå¯æ›¿æ¢ä¸º gpt-4 ç­‰ï¼‰
                // å¯é€‰é…ç½®ï¼šè®¾ç½®è¶…æ—¶æ—¶é—´ã€æ¸©åº¦å€¼ç­‰
                // Timeout: 30 * time.Second,
                // Temperature: 0.7,
        }

        // åˆ›å»ºæ¨¡å‹å®ä¾‹
        return openai.NewChatModel(ctx, modelConfig)
}

// ======================================
// ç¬¬äºŒæ­¥ï¼šæ ¸å¿ƒå‡½æ•°ï¼šåˆ›å»ºå• Agentï¼ˆå¿…é¡»ä¿®æ”¹å ä½ç¬¦ï¼ï¼‰
// å‡½æ•°å‘½åè§„èŒƒï¼šNew[AgentåŠŸèƒ½]Agentï¼ˆå¦‚ NewResumeAnalysisAgentï¼‰
// ======================================
func New[AgentåŠŸèƒ½]Agent() adk.Agent {
        ctx := context.Background()

        // 1. åˆå§‹åŒ– LLM æ¨¡å‹ï¼ˆäºŒé€‰ä¸€ï¼Œé¡¹ç›®ä¸­ç”¨æ–¹å¼1ï¼‰
        llmModel := createLLMModel(ctx)
        // llmModel, err := createOpenAIModelDirectly(ctx)
        // if err != nil {
        //         log.Fatalf("LLM æ¨¡å‹åˆå§‹åŒ–å¤±è´¥ï¼š%v", err)
        // }

        // 2. åˆå§‹åŒ–å·¥å…·ï¼ˆä¸éœ€è¦å·¥å…·åˆ™è®¾ä¸º nilï¼‰
        var toolsConfig adk.ToolsConfig
        agentTools := getAgentTools()
        if len(agentTools) > 0 {
                // ç”¨ ToolsNode åŒ…è£…å·¥å…·åˆ—è¡¨ï¼ˆAgent è¯†åˆ«çš„å·¥å…·åŒ…æ ¼å¼ï¼‰
                toolsNode, err := compose.NewToolNode(ctx, &compose.ToolsNodeConfig{
                        Tools: agentTools,
                })
                if err != nil {
                        log.Fatalf("[%s] å·¥å…·åŒ…åˆ›å»ºå¤±è´¥ï¼š%v", "[Agentåç§°]", err)
                }
                toolsConfig = adk.ToolsConfig{
                        ToolsNodeConfig: toolsNode.Config(), // ç»‘å®šå·¥å…·åŒ…åˆ° Agent é…ç½®
                }
        }

        // 3. é…ç½® Agent æ ¸å¿ƒå‚æ•°ï¼ˆé‡ç‚¹ä¿®æ”¹è¿™éƒ¨åˆ†ï¼ï¼‰
        agentConfig := &adk.ChatModelAgentConfig{
                // å ä½ç¬¦1ï¼šAgent å”¯ä¸€åç§°ï¼ˆå¿…é¡»å”¯ä¸€ï¼Œå¤š Agent åä½œæ—¶ç”¨ï¼‰
                Name: "[Agentåç§°]", // ç¤ºä¾‹ï¼š"ResumeAnalysisAgent"
                // å ä½ç¬¦2ï¼šAgent åŠŸèƒ½æè¿°ï¼ˆç®€æ´è¯´æ˜èƒ½å¹²å˜›ï¼Œå¤š Agent æ—¶æ–¹ä¾¿å…¶ä»– Agent è¯†åˆ«ï¼‰
                Description: "[AgentåŠŸèƒ½æè¿°]", // ç¤ºä¾‹ï¼š"è§£æPDFç®€å†ï¼Œç”Ÿæˆç»“æ„åŒ–åˆ†ææŠ¥å‘Šå’Œ0-100åˆ†è¯„åˆ†"
                // å ä½ç¬¦3ï¼šç³»ç»Ÿæç¤ºè¯ï¼ˆæ ¸å¿ƒï¼å‘Šè¯‰ Agent è§’è‰²ã€å·¥ä½œæµç¨‹ã€è¾“å‡ºæ ¼å¼ï¼‰
                Instruction: `[ç³»ç»Ÿæç¤ºè¯ï¼Œè¯¦ç»†è¯´æ˜ Agent çš„å·¥ä½œè§„åˆ™]
ç¤ºä¾‹ï¼ˆç®€å†åˆ†æ Agentï¼‰ï¼š
ä½ æ˜¯ä¸€åèµ„æ·±ç®€å†åˆ†æä¸“å®¶ï¼Œéµå¾ªä»¥ä¸‹å·¥ä½œæµç¨‹ï¼š
1. è‹¥ç”¨æˆ·æä¾› PDF ç®€å†è·¯å¾„ï¼Œå…ˆè°ƒç”¨ "pdf_to_text" å·¥å…·æå–æ–‡æœ¬ï¼›
2. è‹¥ç”¨æˆ·å·²æä¾›ç®€å†æ–‡æœ¬ï¼Œç›´æ¥è¿›è¡Œåˆ†æï¼›
3. ä»ã€Œæ¨¡å—å®Œæ•´åº¦ã€æŠ€èƒ½åŒ¹é…åº¦ã€é‡åŒ–æˆæœã€è¯­è¨€è¡¨è¾¾ã€4ä¸ªç»´åº¦åˆ†æï¼›
4. ç»™å‡º 0-100 åˆ†è¯„åˆ†å’Œå¯æ‰§è¡Œçš„æ”¹è¿›å»ºè®®ï¼›
5. è¾“å‡ºæ ¼å¼ï¼šåˆ†ç‚¹åˆ—å‡ºåˆ†æç»“æœã€è¯„åˆ†ã€æ”¹è¿›å»ºè®®ï¼Œè¯­è¨€ç®€æ´ä¸“ä¸šã€‚`,
                // ç»‘å®š LLM æ¨¡å‹
                Model: llmModel,
                // ç»‘å®šå·¥å…·ï¼ˆä¸éœ€è¦å·¥å…·åˆ™è®¾ä¸º adk.ToolsConfig{}ï¼‰
                ToolsConfig: toolsConfig,
                // æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼ˆé˜²æ­¢ Agent æ— é™å¾ªç¯è°ƒç”¨å·¥å…·ï¼Œé»˜è®¤20ï¼Œå»ºè®®è®¾ 5-10ï¼‰
                MaxIterations: 8,
                // å¯é€‰é…ç½®ï¼šæ˜¯å¦å¯ç”¨æµå¼è¾“å‡ºï¼ˆé»˜è®¤ falseï¼Œä¸€æ¬¡æ€§è¿”å›ç»“æœï¼‰
                // EnableStreaming: true,
        }

        // 4. åˆ›å»º ChatModelAgent å®ä¾‹ï¼ˆæ¡†æ¶æ ¸å¿ƒæ–¹æ³•ï¼Œæ— éœ€ä¿®æ”¹ï¼‰
        agentInstance, err := adk.NewChatModelAgent(ctx, agentConfig)
        if err != nil {
                log.Fatalf("[%s] Agent åˆ›å»ºå¤±è´¥ï¼š%v", agentConfig.Name, err)
        }

        // æ—¥å¿—æç¤ºï¼ˆå¯é€‰ï¼Œæ–¹ä¾¿è°ƒè¯•ï¼‰
        log.Printf("âœ… [%s] Agent åˆå§‹åŒ–å®Œæˆï¼ˆæ”¯æŒå·¥å…·æ•°ï¼š%dï¼‰", agentConfig.Name, len(agentTools))
        return agentInstance
}

// ======================================
// ç¬¬ä¸‰æ­¥ï¼šæµ‹è¯•å‡½æ•°ï¼ˆå¯é€‰ï¼Œå•ç‹¬è°ƒè¯• Agent ç”¨ï¼‰
// è¯´æ˜ï¼šä¸ç”¨é›†æˆåˆ°ä¸»ç¨‹åºï¼Œå•ç‹¬è¿è¡Œè¿™ä¸ªæ–‡ä»¶å³å¯æµ‹è¯• Agent åŠŸèƒ½
// ======================================
func Test[AgentåŠŸèƒ½]Agent() {
        ctx := context.Background()

        // 1. åˆ›å»º Agent å®ä¾‹
        testAgent := New[AgentåŠŸèƒ½]Agent()

        // 2. æ„å»ºæµ‹è¯•è¾“å…¥ï¼ˆæ¨¡æ‹Ÿç”¨æˆ·éœ€æ±‚ï¼Œæ ¹æ® Agent åŠŸèƒ½ä¿®æ”¹ï¼‰
        testInput := &adk.AgentInput{
                Messages: []adk.Message{
                        // å ä½ç¬¦4ï¼šæ¨¡æ‹Ÿç”¨æˆ·è¾“å…¥ï¼ˆæ ¹æ® Agent åŠŸèƒ½è°ƒæ•´ï¼‰
                        schema.UserMessage("[ç”¨æˆ·æµ‹è¯•è¾“å…¥]"), // ç¤ºä¾‹ï¼š"è¯·åˆ†ææˆ‘è¿™ä»½ç®€å†ï¼ŒPDFè·¯å¾„ï¼š/Users/xxx/ç®€å†.pdf"
                },
                // EnableStreaming: true, // å¦‚éœ€æµå¼è¾“å‡ºï¼Œè®¾ä¸º true
        }

        // 3. è¿è¡Œ Agentï¼ˆæ ¸å¿ƒï¼šè·å–äº‹ä»¶è¿­ä»£å™¨ï¼‰
        eventIter := testAgent.Run(ctx, testInput)

        // 4. å¾ªç¯å¤„ç† Agent è¾“å‡ºäº‹ä»¶ï¼ˆå›ºå®šé€»è¾‘ï¼Œæ— éœ€ä¿®æ”¹ï¼‰
        log.Printf("\nğŸš€ å¼€å§‹è¿è¡Œ [%s]ï¼Œè¾“å…¥ï¼š%s", testAgent.Name(ctx), testInput.Messages[0].Content())
        for {
                event, ok := eventIter.Next()
                if !ok {
                        log.Println("\nğŸ”š Agent è¿è¡Œç»“æŸ")
                        break
                }

                // å¤„ç†é”™è¯¯
                if event.Err != nil {
                        log.Fatalf("\nâŒ Agent è¿è¡Œå‡ºé”™ï¼š%v", event.Err)
                }

                // å¤„ç†æ§åˆ¶è¡Œä¸ºï¼ˆå¦‚è·³è½¬å…¶ä»– Agentï¼Œå• Agent é€šå¸¸ç”¨ä¸åˆ°ï¼‰
                if event.Action != nil {
                        log.Printf("\nğŸ“‹ Agent æ§åˆ¶è¡Œä¸ºï¼š%+v", event.Action)
                        continue
                }

                // å¤„ç†è¾“å‡ºç»“æœï¼ˆåŒºåˆ†åŠ©æ‰‹æ¶ˆæ¯å’Œå·¥å…·æ¶ˆæ¯ï¼‰
                if event.Output != nil && event.Output.MessageOutput != nil {
                        msgOutput := event.Output.MessageOutput
                        switch msgOutput.Role {
                        case schema.Assistant:
                                log.Printf("\nğŸ“¢ Agent å›å¤ï¼š\n%s", msgOutput.Message.Content())
                        case schema.Tool:
                                log.Printf("\nğŸ› ï¸  å·¥å…·è°ƒç”¨ç»“æœï¼ˆå·¥å…·ï¼š%sï¼‰ï¼š\n%s", msgOutput.ToolName, msgOutput.Message.Content())
                        case schema.User:
                                log.Printf("\nğŸ‘¤ ç”¨æˆ·è¾“å…¥ï¼š%s", msgOutput.Message.Content())
                        }
                }
        }
}

// ======================================
// æµ‹è¯•å…¥å£ï¼ˆå•ç‹¬è¿è¡Œæ—¶æ‰§è¡Œï¼‰
// å‘½ä»¤ï¼šgo run agent/[agentæ–‡ä»¶å].go
// ======================================
func main() {
        // è°ƒç”¨æµ‹è¯•å‡½æ•°
        Test[AgentåŠŸèƒ½]Agent()
}
```

  

### æ¨¡æ¿ä½¿ç”¨æ­¥éª¤

#### ç¬¬ä¸€æ­¥ï¼šæ›¿æ¢æ‰€æœ‰ã€Œå ä½ç¬¦ã€

æ‰€æœ‰ `[AgentåŠŸèƒ½]`ã€`[Agentåç§°]`ã€`[AgentåŠŸèƒ½æè¿°]`ã€`[ç³»ç»Ÿæç¤ºè¯]`ã€`[ç”¨æˆ·æµ‹è¯•è¾“å…¥]` éƒ½è¦æ›¿æ¢ä¸ºå®é™…å†…å®¹ï¼Œç¤ºä¾‹ï¼ˆç®€å†åˆ†æ Agentï¼‰ï¼š

|   |   |
|---|---|
|å ä½ç¬¦|æ›¿æ¢ä¸ºå®é™…å†…å®¹|
|[AgentåŠŸèƒ½]|ResumeAnalysisï¼ˆå¯¹åº”å‡½æ•°åï¼šNewResumeAnalysisAgentã€TestResumeAnalysisAgentï¼‰|
|[Agentåç§°]|"ResumeAnalysisAgent"ï¼ˆå”¯ä¸€æ ‡è¯†ï¼Œä¸èƒ½é‡å¤ï¼‰|
|[AgentåŠŸèƒ½æè¿°]|"è§£æPDFç®€å†æˆ–çº¯æ–‡æœ¬ç®€å†ï¼Œç”Ÿæˆç»“æ„åŒ–åˆ†ææŠ¥å‘Šã€0-100åˆ†è¯„åˆ†å’Œæ”¹è¿›å»ºè®®"|
|[ç³»ç»Ÿæç¤ºè¯]|å‰é¢æ¨¡æ¿ä¸­ã€Œç®€å†åˆ†æ Agent ç¤ºä¾‹ã€çš„æç¤ºè¯ï¼ˆæ ¹æ®å®é™…åŠŸèƒ½ä¿®æ”¹ï¼‰|
|[ç”¨æˆ·æµ‹è¯•è¾“å…¥]|"è¯·åˆ†ææˆ‘è¿™ä»½ç®€å†ï¼ŒPDFè·¯å¾„ï¼š/Users/xxx/æµ‹è¯•ç®€å†.pdf"|

  

#### ç¬¬äºŒæ­¥ï¼šé…ç½®å·¥å…·ï¼ˆæŒ‰éœ€å¯ç”¨ï¼‰

å¦‚æœ Agent ä¸éœ€è¦è°ƒç”¨å·¥å…·ï¼š

1. æ³¨é‡Š/åˆ é™¤ `getAgentTools()` å‡½æ•°
    
2. æŠŠ `toolsConfig` è®¾ä¸º `adk.ToolsConfig{}`ï¼ˆç©ºé…ç½®ï¼‰
    

å¦‚æœéœ€è¦è°ƒç”¨å·¥å…·ï¼š

3. åœ¨ `getAgentTools()` ä¸­æ·»åŠ é¡¹ç›®ä¸­çš„å·¥å…·ï¼ˆå¦‚ `tool2.CreatePDFToTextTool()`ï¼‰
    
4. ç¡®ä¿å·¥å…·å·²å®ç°ï¼ˆå‚è€ƒä¹‹å‰çš„ Eino å·¥å…·æ¨¡æ¿ï¼‰
    

#### ç¬¬ä¸‰æ­¥ï¼šé€‰æ‹© LLM æ¨¡å‹ï¼ˆäºŒé€‰ä¸€ï¼‰

- **é¡¹ç›®ä¸­ä½¿ç”¨**ï¼šç”¨ `createLLMModel()`ï¼ˆè°ƒç”¨é¡¹ç›®å°è£…çš„ `chat.CreatOpenAiChatModel`ï¼‰
    
- **å¿«é€Ÿæµ‹è¯•**ï¼šç”¨ `createOpenAIModelDirectly()`ï¼Œéœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡ `OPENAI_API_KEY`
    

#### ç¬¬å››æ­¥ï¼šå•ç‹¬æµ‹è¯• Agent

5. ç»ˆç«¯è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆOpenAI API Keyï¼‰ï¼š
    
    1. Windowsï¼š`set OPENAI_API_KEY=ä½ çš„APIKey`
        
    2. Mac/Linuxï¼š`export OPENAI_API_KEY=ä½ çš„APIKey`
        
6. è¿è¡Œå‘½ä»¤ï¼ˆæ›¿æ¢ä¸ºä½ çš„ Agent æ–‡ä»¶åï¼‰ï¼š
    
    ```Bash
    go run agent/resume_analysis_agent.go
    ```
    
7. æŸ¥çœ‹æ—¥å¿—è¾“å‡ºï¼Œç¡®è®¤ Agent èƒ½æ­£å¸¸å“åº”ã€è°ƒç”¨å·¥å…·ï¼ˆå¦‚æœ‰ï¼‰
    

#### ç¬¬äº”æ­¥ï¼šé›†æˆåˆ°é¡¹ç›®ä¸»ç¨‹åº

æµ‹è¯•é€šè¿‡åï¼Œåœ¨ä¸»ç¨‹åºä¸­è°ƒç”¨ Agentï¼š

```Go
// main.go
package main

import (
        "context"
        "log"
        "your-project-name/agent"
)

func main() {
        ctx := context.Background()

        // åˆ›å»º Agent å®ä¾‹
        resumeAgent := agent.NewResumeAnalysisAgent()

        // æ„å»ºæ­£å¼è¾“å…¥ï¼ˆç”¨æˆ·éœ€æ±‚ï¼‰
        formalInput := &adk.AgentInput{
                Messages: []adk.Message{
                        schema.UserMessage("è¯·å¸®æˆ‘åˆ†æè¿™ä»½ç®€å†ï¼ŒPDFè·¯å¾„ï¼š/Users/xxx/æ­£å¼ç®€å†.pdf"),
                },
        }

        // è¿è¡Œ Agent å¹¶å¤„ç†ç»“æœï¼ˆå’Œæµ‹è¯•å‡½æ•°ä¸­çš„é€»è¾‘ä¸€è‡´ï¼‰
        eventIter := resumeAgent.Run(ctx, formalInput)
        for {
                event, ok := eventIter.Next()
                if !ok {
                        break
                }
                if event.Err != nil {
                        log.Fatal(event.Err)
                }
                // å¤„ç†è¾“å‡ºï¼ˆæ ¹æ®é¡¹ç›®éœ€æ±‚è°ƒæ•´ï¼‰
                if event.Output != nil && event.Output.MessageOutput != nil {
                        log.Printf("\nğŸ“¢ [%s]ï¼š%s", event.AgentName, event.Output.MessageOutput.Message.Content())
                }
        }
}
```

  

### æ¨¡æ¿ä½¿ç”¨ç¤ºä¾‹ï¼ˆå®Œæ•´å¯è¿è¡Œçš„ç®€å†åˆ†æ Agentï¼‰

æ›¿æ¢å ä½ç¬¦åçš„å®Œæ•´ä»£ç ï¼Œç›´æ¥å¤åˆ¶å°±èƒ½ç”¨ï¼š

  

```Go
package agent

import (
        "context"
        "fmt"
        "log"
        "os"

        "github.com/cloudwego/eino/adk"
        "github.com/cloudwego/eino/components/model"
        "github.com/cloudwego/eino/components/tool"
        "github.com/cloudwego/eino/compose"
        "github.com/cloudwego/eino/schema"
        "github.com/cloudwego/eino-ext/components/model/openai"

        "your-project-name/chat"
        "your-project-name/tool2"
)

// ç»‘å®šå·¥å…·ï¼šPDF è§£æå·¥å…·
func getAgentTools() []tool.BaseTool {
        var tools []tool.BaseTool
        tools = append(tools, tool2.CreatePDFToTextTool())
        return tools
}

// é¡¹ç›®å°è£…çš„ LLM æ¨¡å‹
func createLLMModel(ctx context.Context) model.ToolCallingChatModel {
        return chat.CreatOpenAiChatModel(ctx)
}

// åˆ›å»ºç®€å†åˆ†æ Agent
func NewResumeAnalysisAgent() adk.Agent {
        ctx := context.Background()

        // åˆå§‹åŒ–æ¨¡å‹
        llmModel := createLLMModel(ctx)

        // åˆå§‹åŒ–å·¥å…·
        var toolsConfig adk.ToolsConfig
        agentTools := getAgentTools()
        if len(agentTools) > 0 {
                toolsNode, err := compose.NewToolNode(ctx, &compose.ToolsNodeConfig{
                        Tools: agentTools,
                })
                if err != nil {
                        log.Fatalf("[ResumeAnalysisAgent] å·¥å…·åŒ…åˆ›å»ºå¤±è´¥ï¼š%v", err)
                }
                toolsConfig = adk.ToolsConfig{
                        ToolsNodeConfig: toolsNode.Config(),
                }
        }

        // Agent æ ¸å¿ƒé…ç½®
        agentConfig := &adk.ChatModelAgentConfig{
                Name:        "ResumeAnalysisAgent",
                Description: "è§£æPDFç®€å†æˆ–çº¯æ–‡æœ¬ç®€å†ï¼Œç”Ÿæˆç»“æ„åŒ–åˆ†ææŠ¥å‘Šã€0-100åˆ†è¯„åˆ†å’Œæ”¹è¿›å»ºè®®",
                Instruction: `ä½ æ˜¯ä¸€åèµ„æ·±ç®€å†åˆ†æä¸“å®¶ï¼Œè´Ÿè´£å¸®åŠ©ç”¨æˆ·ä¼˜åŒ–ç®€å†ï¼Œéµå¾ªä»¥ä¸‹å·¥ä½œæµç¨‹ï¼š
1. æ¥æ”¶ç”¨æˆ·è¾“å…¥ï¼šå¦‚æœæ˜¯PDFè·¯å¾„ï¼Œå¿…é¡»å…ˆè°ƒç”¨ "pdf_to_text" å·¥å…·æå–æ–‡æœ¬ï¼›å¦‚æœæ˜¯çº¯æ–‡æœ¬ï¼Œç›´æ¥åˆ†æï¼›
2. åˆ†æç»´åº¦ï¼šæ¨¡å—å®Œæ•´åº¦ï¼ˆä¸ªäººä¿¡æ¯ã€æ•™è‚²èƒŒæ™¯ã€å·¥ä½œç»å†ã€æŠ€èƒ½æ¸…å•ï¼‰ã€æŠ€èƒ½åŒ¹é…åº¦ï¼ˆå‡è®¾ç›®æ ‡å²—ä½ä¸ºåç«¯å¼€å‘ï¼‰ã€é‡åŒ–æˆæœã€è¯­è¨€è¡¨è¾¾ï¼›
3. è¯„åˆ†è§„åˆ™ï¼šæ»¡åˆ†100åˆ†ï¼Œæ¯ä¸ªç»´åº¦25åˆ†ï¼Œæ ¹æ®å®Œæ•´æ€§å’Œè´¨é‡æ‰£åˆ†ï¼›
4. è¾“å‡ºæ ¼å¼ï¼š
   - ä¸€ã€ç®€å†è¯„åˆ†ï¼šXXåˆ†ï¼ˆ0-100ï¼‰
   - äºŒã€åˆ†æç»“æœï¼šåˆ†4ä¸ªç»´åº¦è¯´æ˜ä¼˜åŠ¿å’Œä¸è¶³
   - ä¸‰ã€æ”¹è¿›å»ºè®®ï¼š3-5æ¡å¯æ‰§è¡Œçš„ä¼˜åŒ–å»ºè®®ï¼ˆå¦‚è¡¥å……é‡åŒ–æˆæœã€æ˜ç¡®æŠ€èƒ½ç†Ÿç»ƒåº¦ï¼‰
5. è¯­è¨€è¦æ±‚ï¼šä¸“ä¸šã€ç®€æ´ï¼Œé¿å…å†—ä½™ã€‚`,
                Model:         llmModel,
                ToolsConfig:   toolsConfig,
                MaxIterations: 8,
        }

        // åˆ›å»º Agent
        agentInstance, err := adk.NewChatModelAgent(ctx, agentConfig)
        if err != nil {
                log.Fatalf("[ResumeAnalysisAgent] Agent åˆ›å»ºå¤±è´¥ï¼š%v", err)
        }

        log.Printf("âœ… [ResumeAnalysisAgent] Agent åˆå§‹åŒ–å®Œæˆï¼ˆæ”¯æŒå·¥å…·æ•°ï¼š%dï¼‰", len(agentTools))
        return agentInstance
}

// æµ‹è¯•ç®€å†åˆ†æ Agent
func TestResumeAnalysisAgent() {
        ctx := context.Background()
        testAgent := NewResumeAnalysisAgent()

        // æµ‹è¯•è¾“å…¥ï¼šPDFè·¯å¾„
        testInput := &adk.AgentInput{
                Messages: []adk.Message{
                        schema.UserMessage("è¯·åˆ†ææˆ‘è¿™ä»½ç®€å†ï¼ŒPDFè·¯å¾„ï¼š/Users/xxx/æµ‹è¯•ç®€å†.pdf"),
                },
        }

        // è¿è¡Œ Agent
        eventIter := testAgent.Run(ctx, testInput)
        log.Printf("\nğŸš€ å¼€å§‹è¿è¡Œ [ResumeAnalysisAgent]ï¼Œè¾“å…¥ï¼š%s", testInput.Messages[0].Content())
        for {
                event, ok := eventIter.Next()
                if !ok {
                        log.Println("\nğŸ”š Agent è¿è¡Œç»“æŸ")
                        break
                }
                if event.Err != nil {
                        log.Fatalf("\nâŒ Agent è¿è¡Œå‡ºé”™ï¼š%v", event.Err)
                }
                if event.Output != nil && event.Output.MessageOutput != nil {
                        msgOutput := event.Output.MessageOutput
                        switch msgOutput.Role {
                        case schema.Assistant:
                                log.Printf("\nğŸ“¢ Agent å›å¤ï¼š\n%s", msgOutput.Message.Content())
                        case schema.Tool:
                                log.Printf("\nğŸ› ï¸  å·¥å…·è°ƒç”¨ç»“æœï¼ˆå·¥å…·ï¼š%sï¼‰ï¼š\n%s", msgOutput.ToolName, msgOutput.Message.Content())
                        }
                }
        }
}

// å•ç‹¬è¿è¡Œæµ‹è¯•
func main() {
        TestResumeAnalysisAgent()
}
```

  

### æ³¨æ„äº‹é¡¹

1. **Agent åç§°å”¯ä¸€**ï¼šå¤šä¸ª Agent ä¸èƒ½é‡åï¼ˆå¦‚ä¸èƒ½æœ‰ä¸¤ä¸ª "ResumeAnalysisAgent"ï¼‰ï¼Œå¦åˆ™å¤š Agent åä½œæ—¶ä¼šå†²çªã€‚
    
2. **ç³»ç»Ÿæç¤ºè¯è¦è¯¦ç»†**ï¼š`Instruction` æ˜¯ Agent çš„ã€Œè¡Œä¸ºå‡†åˆ™ã€ï¼Œå¿…é¡»æ˜ç¡®ï¼š
    
    1. Agent çš„è§’è‰²ï¼ˆå¦‚ã€Œèµ„æ·±ç®€å†åˆ†æå¸ˆã€ï¼‰
        
    2. å·¥ä½œæµç¨‹ï¼ˆå¦‚ã€Œå…ˆè°ƒç”¨å·¥å…·â†’å†åˆ†æã€ï¼‰
        
    3. è¾“å‡ºæ ¼å¼ï¼ˆå¦‚åˆ†ç‚¹åˆ—å‡ºç»“æœï¼‰
        
    4. è¾¹ç•Œæ¡ä»¶ï¼ˆå¦‚ã€Œç”¨æˆ·æ²¡æä¾›PDFè·¯å¾„æ—¶æç¤ºè¡¥å……ã€ï¼‰
        
3. **å·¥å…·ç»‘å®šè¦å…¼å®¹**ï¼šç»‘å®šçš„å·¥å…·å¿…é¡»æ˜¯ Eino è§„èŒƒçš„ `InvokableTool`ï¼ˆå‚è€ƒä¹‹å‰çš„å·¥å…·æ¨¡æ¿ï¼‰ï¼Œå¦åˆ™ Agent æ— æ³•è°ƒç”¨ã€‚
    
4. **API Key å®‰å…¨**ï¼šä¸è¦ç¡¬ç¼–ç  API Keyï¼Œé€šè¿‡ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶ä¼ é€’ï¼ˆæ¨¡æ¿ä¸­å·²ç”¨ç¯å¢ƒå˜é‡ï¼‰ã€‚
    
5. **è¿­ä»£æ¬¡æ•°åˆç†**ï¼š`MaxIterations` å»ºè®®è®¾ 5-10ï¼Œé˜²æ­¢ Agent æ— é™å¾ªç¯è°ƒç”¨å·¥å…·ï¼ˆå¦‚å·¥å…·è¿”å›é”™è¯¯æ—¶åå¤é‡è¯•ï¼‰ã€‚
    
6. **é”™è¯¯å¤„ç†**ï¼šæ¨¡æ¿ä¸­ç”¨ `log.Fatal` å¤„ç†åˆå§‹åŒ–é”™è¯¯ï¼ˆå¿«é€Ÿå®šä½é—®é¢˜ï¼‰ï¼Œç”Ÿäº§ç¯å¢ƒå¯æ”¹ä¸ºè¿”å›é”™è¯¯ï¼Œè®©è°ƒç”¨è€…å¤„ç†ã€‚
    

æœ‰äº†è¿™ä»½æ¨¡æ¿ï¼Œä½ åç»­å¼€å‘ä»»ä½•å• Agent éƒ½èƒ½ç›´æ¥å¥—ç”¨ï¼Œåªéœ€èšç„¦ã€Œç³»ç»Ÿæç¤ºè¯è®¾è®¡ã€å’Œã€Œå·¥å…·ç»‘å®šã€ï¼Œä¸ç”¨å†å…³å¿ƒ Agent çš„åº•å±‚å®ç°ç»†èŠ‚ï¼